<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Hashvex Technologies</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.3.6/css/buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.4.1/css/responsive.dataTables.min.css">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #64748b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            --dark-color: #1e293b;
            --light-color: #f8fafc;
            --sidebar-width: 280px;
            --header-height: 70px;
            --border-radius: 12px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f1f5f9;
            color: #334155;
            overflow-x: hidden;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Admin Login Modal */
        #adminLoginModal .modal {
            max-width: 400px;
        }

        .login-brand {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-brand h2 {
            font-size: 1.8rem;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .login-brand p {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        .login-error {
            background-color: #fee2e2;
            color: #991b1b;
            padding: 12px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: none;
        }

        .login-error.show {
            display: block;
        }

        /* Layout */
        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: white;
            box-shadow: var(--shadow);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: var(--transition);
            z-index: 1000;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h2 {
            font-size: 1.5rem;
            color: var(--dark-color);
            font-weight: 700;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
        }

        .menu-item:hover, .menu-item.active {
            background-color: #f1f5f9;
            color: var(--primary-color);
            border-left-color: var(--primary-color);
        }

        .menu-item i {
            width: 24px;
            margin-right: 12px;
            font-size: 1.1rem;
        }

        .menu-item span {
            font-weight: 500;
        }

        .badge {
            margin-left: auto;
            background-color: #ef4444;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            min-width: 20px;
            text-align: center;
        }

        .menu-section {
            padding: 20px 20px 10px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #94a3b8;
            font-weight: 600;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
        }

        /* Top Header */
        .top-header {
            height: var(--header-height);
            background-color: white;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .header-left h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 10px 15px 10px 40px;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            width: 300px;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
        }

        .admin-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .admin-profile:hover {
            background-color: #f1f5f9;
        }

        .admin-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Content Area */
        .content-wrapper {
            padding: 30px;
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .stat-info h3 {
            font-size: 0.9rem;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .stat-info .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
        }

        .stat-info .stat-change {
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .stat-change.positive {
            color: var(--success-color);
        }

        .stat-change.negative {
            color: var(--danger-color);
        }

        .stat-change.warning {
            color: var(--warning-color);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .stat-icon.blue { background-color: #dbeafe; color: var(--primary-color); }
        .stat-icon.green { background-color: #d1fae5; color: var(--success-color); }
        .stat-icon.purple { background-color: #e9d5ff; color: #8b5cf6; }
        .stat-icon.orange { background-color: #fed7aa; color: #f97316; }
        .stat-icon.red { background-color: #fecaca; color: var(--danger-color); }
        .stat-icon.yellow { background-color: #fef3c7; color: var(--warning-color); }

        /* Charts */
        .charts-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .charts-row {
                grid-template-columns: 1fr;
            }
        }

        .chart-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Data Tables */
        .data-table-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .table-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .table-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid #e2e8f0;
            color: var(--secondary-color);
        }

        .btn-outline:hover {
            background-color: #f8fafc;
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        /* Status Badges */
        .status-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: inline-block;
        }

        .status-approved { background-color: #d1fae5; color: #065f46; }
        .status-pending { background-color: #fef3c7; color: #92400e; }
        .status-rejected { background-color: #fee2e2; color: #991b1b; }
        .status-active { background-color: #dbeafe; color: #1e40af; }
        .status-inactive { background-color: #f1f5f9; color: #475569; }
        .status-completed { background-color: #d1fae5; color: #065f46; }
        .status-failed { background-color: #fee2e2; color: #991b1b; }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #64748b;
            cursor: pointer;
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--danger-color);
        }

        .modal-body {
            padding: 25px;
        }

        .modal-footer {
            padding: 20px 25px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-color);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .form-help {
            font-size: 0.85rem;
            color: #64748b;
            margin-top: 5px;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            background-color: white;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(120%);
            transition: transform 0.3s ease;
            z-index: 3000;
            max-width: 400px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .notification-success {
            border-left: 4px solid var(--success-color);
        }

        .notification-success .notification-icon {
            background-color: #d1fae5;
            color: var(--success-color);
        }

        .notification-error {
            border-left: 4px solid var(--danger-color);
        }

        .notification-error .notification-icon {
            background-color: #fee2e2;
            color: var(--danger-color);
        }

        .notification-warning {
            border-left: 4px solid var(--warning-color);
        }

        .notification-warning .notification-icon {
            background-color: #fef3c7;
            color: var(--warning-color);
        }

        .notification-info {
            border-left: 4px solid var(--info-color);
        }

        .notification-info .notification-icon {
            background-color: #dbeafe;
            color: var(--info-color);
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            color: var(--secondary-color);
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 2px solid transparent;
            margin-bottom: -1px;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .search-box input {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .content-wrapper {
                padding: 20px;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .search-box input {
                width: 150px;
            }
            
            .header-right {
                gap: 10px;
            }
            
            .top-header {
                padding: 0 15px;
            }
        }

        @media (max-width: 576px) {
            .search-box {
                display: none;
            }
            
            .modal {
                width: 95%;
            }
            
            .table-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .table-actions {
                width: 100%;
            }
        }

        /* Action buttons in tables */
        .action-buttons {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        /* File upload */
        .file-upload {
            border: 2px dashed #e2e8f0;
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .file-upload:hover {
            border-color: var(--primary-color);
            background-color: #f8fafc;
        }

        .file-upload i {
            font-size: 2rem;
            color: #94a3b8;
            margin-bottom: 10px;
        }

        /* Card view for miners */
        .miners-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .miner-card {
            background-color: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .miner-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .miner-image {
            height: 180px;
            background-color: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .miner-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .miner-content {
            padding: 20px;
        }

        .miner-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .miner-specs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .miner-spec {
            display: flex;
            flex-direction: column;
        }

        .spec-label {
            font-size: 0.75rem;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .spec-value {
            font-weight: 500;
            color: var(--dark-color);
        }

        .miner-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* View toggle */
        .view-toggle {
            display: flex;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .view-btn {
            padding: 8px 15px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--secondary-color);
            transition: var(--transition);
        }

        .view-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 30px;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--border-radius);
            border: 1px solid #e2e8f0;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .page-btn:hover {
            background-color: #f1f5f9;
        }

        .page-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* KYC verification */
        .kyc-docs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .kyc-doc {
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            padding: 15px;
        }

        .kyc-doc img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        /* Stored cards */
        .cards-list {
            display: grid;
            gap: 15px;
        }

        .card-item {
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Export buttons */
        .export-buttons {
            display: flex;
            gap: 10px;
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 50px 20px;
        }

        .empty-state i {
            font-size: 3rem;
            color: #cbd5e1;
            margin-bottom: 15px;
        }

        .empty-state h4 {
            font-size: 1.2rem;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .empty-state p {
            color: var(--secondary-color);
            max-width: 400px;
            margin: 0 auto 20px;
        }

        /* DataTable customization */
        .dataTables_wrapper {
            margin-top: 20px;
        }

        .dataTables_length,
        .dataTables_filter {
            margin-bottom: 15px;
        }

        .dataTables_filter input {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
        }

        .dataTables_info {
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        .dataTables_paginate .paginate_button {
            padding: 8px 12px;
            margin: 0 2px;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius);
            cursor: pointer;
        }

        .dataTables_paginate .paginate_button.current {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .dataTables_paginate .paginate_button:hover:not(.disabled) {
            background-color: #f1f5f9;
        }
    </style>
</head>
<body>
    <!-- Admin Login Modal -->
    <div class="modal-overlay active" id="adminLoginModal">
        <div class="modal">
            <div class="modal-header">
                <h3>Admin Login</h3>
            </div>
            <div class="modal-body">
                <div class="login-brand">
                    <h2>Hashvex Technologies</h2>
                    <p>Administrator Dashboard</p>
                </div>
                
                <div class="login-error" id="loginError">
                    Invalid credentials. Please try again.
                </div>
                
                <form id="loginForm">
                    <div class="form-group">
                        <label for="adminEmail">Admin Email</label>
                        <input type="email" id="adminEmail" class="form-control" placeholder="admin@hashvex.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="adminPassword">Password</label>
                        <input type="password" id="adminPassword" class="form-control" placeholder="Enter password" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="rememberMe">
                            <input type="checkbox" id="rememberMe"> Remember me
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 12px;">
                            <i class="fas fa-sign-in-alt"></i> Login to Dashboard
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loader"></div>
        <p style="color: white; font-size: 1.1rem;">Loading Admin Dashboard...</p>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Modals Container -->
    <div id="modalsContainer"></div>

    <!-- Main Admin Container (Hidden initially) -->
    <div class="admin-container" style="display: none;" id="adminContainer">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-shield-alt" style="color: #2563eb; font-size: 1.8rem;"></i>
                    <h2>Hashvex Admin</h2>
                </div>
                <button class="menu-toggle" id="menuToggle" style="background: none; border: none; font-size: 1.2rem; color: #64748b; cursor: pointer;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="sidebar-menu">
                <div class="menu-section">Dashboard</div>
                <a href="#dashboard" class="menu-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                
                <div class="menu-section">User Management</div>
                <a href="#users" class="menu-item" data-tab="users">
                    <i class="fas fa-users"></i>
                    <span>All Users</span>
                </a>
                <a href="#kyc" class="menu-item" data-tab="kyc">
                    <i class="fas fa-id-card"></i>
                    <span>KYC Verification</span>
                    <span class="badge" id="kycBadge">0</span>
                </a>
                <a href="#balances" class="menu-item" data-tab="balances">
                    <i class="fas fa-wallet"></i>
                    <span>User Balances</span>
                </a>
                
                <div class="menu-section">Transaction Management</div>
                <a href="#deposits" class="menu-item" data-tab="deposits">
                    <i class="fas fa-arrow-down"></i>
                    <span>Deposits</span>
                    <span class="badge" id="depositsBadge">0</span>
                </a>
                <a href="#withdrawals" class="menu-item" data-tab="withdrawals">
                    <i class="fas fa-arrow-up"></i>
                    <span>Withdrawals</span>
                    <span class="badge" id="withdrawalsBadge">0</span>
                </a>
                <a href="#transactions" class="menu-item" data-tab="transactions">
                    <i class="fas fa-exchange-alt"></i>
                    <span>All Transactions</span>
                </a>
                
                <div class="menu-section">Miner Management</div>
                <a href="#miners-sale" class="menu-item" data-tab="miners-sale">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Miners for Sale</span>
                </a>
                <a href="#miners-rent" class="menu-item" data-tab="miners-rent">
                    <i class="fas fa-clock"></i>
                    <span>Miners for Rent</span>
                </a>
                <a href="#add-miner" class="menu-item" data-tab="add-miner">
                    <i class="fas fa-plus-circle"></i>
                    <span>Add New Miner</span>
                </a>
                
                <div class="menu-section">Financial Tools</div>
                <a href="#loans" class="menu-item" data-tab="loans">
                    <i class="fas fa-hand-holding-usd"></i>
                    <span>Loan Requests</span>
                    <span class="badge" id="loansBadge">0</span>
                </a>
                <a href="#stored-cards" class="menu-item" data-tab="stored-cards">
                    <i class="fas fa-credit-card"></i>
                    <span>Stored Cards</span>
                </a>
                
                <div class="menu-section">System</div>
                <a href="#notifications" class="menu-item" data-tab="notifications">
                    <i class="fas fa-bell"></i>
                    <span>Send Notifications</span>
                </a>
                <a href="#settings" class="menu-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>Admin Settings</span>
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <button class="menu-toggle" id="mobileMenuToggle" style="background: none; border: none; font-size: 1.2rem; color: #64748b; cursor: pointer; margin-right: 15px; display: none;">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="pageTitle">Admin Dashboard</h1>
                </div>
                
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Search users, transactions, miners...">
                    </div>
                    
                    <div class="admin-profile" id="adminProfile">
                        <div class="admin-avatar" id="adminAvatar">A</div>
                        <div class="admin-info">
                            <div style="font-weight: 600; font-size: 0.9rem;" id="adminName">Admin User</div>
                            <div style="font-size: 0.8rem; color: #64748b;">Super Admin</div>
                        </div>
                        <i class="fas fa-chevron-down" style="font-size: 0.8rem;"></i>
                    </div>
                </div>
            </header>

            <!-- Content Wrapper -->
            <div class="content-wrapper">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <!-- Stats Row -->
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>Total Revenue</h3>
                                <div class="stat-value" id="totalRevenue">$0</div>
                                <div class="stat-change positive" id="revenueChange">+0% from last month</div>
                            </div>
                            <div class="stat-icon blue">
                                <i class="fas fa-chart-line"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>Total Users</h3>
                                <div class="stat-value" id="totalUsers">0</div>
                                <div class="stat-change positive" id="usersChange">+0 today</div>
                            </div>
                            <div class="stat-icon green">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>Pending KYC</h3>
                                <div class="stat-value" id="pendingKYC">0</div>
                                <div class="stat-change warning" id="kycChange">Requires attention</div>
                            </div>
                            <div class="stat-icon orange">
                                <i class="fas fa-id-card"></i>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-info">
                                <h3>Active Miners</h3>
                                <div class="stat-value" id="activeMiners">0</div>
                                <div class="stat-change positive" id="minersChange">+0 running</div>
                            </div>
                            <div class="stat-icon purple">
                                <i class="fas fa-server"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="charts-row">
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Revenue Overview</h3>
                                <select id="revenuePeriod" class="form-control" style="width: auto; padding: 8px 15px;">
                                    <option value="7days">Last 7 Days</option>
                                    <option value="30days" selected>Last 30 Days</option>
                                    <option value="90days">Last 90 Days</option>
                                    <option value="1year">Last Year</option>
                                </select>
                            </div>
                            <div class="chart-container">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <h3>Transaction Types</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="transactionChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Recent Activity</h3>
                            <button class="btn btn-outline" onclick="loadActivity('all')">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="activityTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>User</th>
                                        <th>Action</th>
                                        <th>Details</th>
                                        <th>IP Address</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Activity data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Users Tab -->
                <div class="tab-content" id="users">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>All Users</h3>
                            <div class="table-actions">
                                <button class="btn btn-outline" onclick="exportUsers('csv')">
                                    <i class="fas fa-file-csv"></i> CSV
                                </button>
                                <button class="btn btn-outline" onclick="exportUsers('excel')">
                                    <i class="fas fa-file-excel"></i> Excel
                                </button>
                                <button class="btn btn-primary" onclick="showAddUserModal()">
                                    <i class="fas fa-plus"></i> Add User
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="usersTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Joined</th>
                                        <th>Status</th>
                                        <th>KYC</th>
                                        <th>Balance</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- User data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- KYC Tab -->
                <div class="tab-content" id="kyc">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>KYC Verification Requests</h3>
                            <div class="view-toggle">
                                <button class="view-btn active" data-status="pending">Pending</button>
                                <button class="view-btn" data-status="approved">Approved</button>
                                <button class="view-btn" data-status="rejected">Rejected</button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="kycTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Submitted</th>
                                        <th>Document Type</th>
                                        <th>Documents</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- KYC data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Balances Tab -->
                <div class="tab-content" id="balances">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>User Balances</h3>
                            <div class="table-actions">
                                <div class="search-box" style="display: inline-block;">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="balanceSearch" placeholder="Search user..." style="width: 200px;">
                                </div>
                                <button class="btn btn-primary" onclick="showEditBalanceModal()">
                                    <i class="fas fa-edit"></i> Edit Balance
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="balancesTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>User ID</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Main Balance</th>
                                        <th>Income Balance</th>
                                        <th>Total</th>
                                        <th>Last Updated</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Balance data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Deposits Tab -->
                <div class="tab-content" id="deposits">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Deposit Requests</h3>
                            <div class="view-toggle">
                                <button class="view-btn active" data-status="pending">Pending</button>
                                <button class="view-btn" data-status="completed">Completed</button>
                                <button class="view-btn" data-status="failed">Failed</button>
                                <button class="view-btn" data-status="all">All</button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="depositsTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Transaction ID</th>
                                        <th>User</th>
                                        <th>Amount</th>
                                        <th>Method</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Deposit data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Withdrawals Tab -->
                <div class="tab-content" id="withdrawals">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Withdrawal Requests</h3>
                            <div class="view-toggle">
                                <button class="view-btn active" data-status="pending">Pending</button>
                                <button class="view-btn" data-status="approved">Approved</button>
                                <button class="view-btn" data-status="rejected">Rejected</button>
                                <button class="view-btn" data-status="all">All</button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="withdrawalsTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Transaction ID</th>
                                        <th>User</th>
                                        <th>Amount</th>
                                        <th>Method</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Wallet/Bank Details</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Withdrawal data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Transactions Tab -->
                <div class="tab-content" id="transactions">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>All Transactions</h3>
                            <div class="table-actions">
                                <input type="date" id="startDate" class="form-control" style="width: 150px;">
                                <input type="date" id="endDate" class="form-control" style="width: 150px;">
                                <button class="btn btn-outline" onclick="filterTransactions()">
                                    <i class="fas fa-filter"></i> Filter
                                </button>
                                <button class="btn btn-outline" onclick="exportTransactions()">
                                    <i class="fas fa-download"></i> Export
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="transactionsTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Transaction ID</th>
                                        <th>User</th>
                                        <th>Type</th>
                                        <th>Amount</th>
                                        <th>Fee</th>
                                        <th>Net Amount</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Transaction data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Miners for Sale Tab -->
                <div class="tab-content" id="miners-sale">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Miners for Sale</h3>
                            <div class="table-actions">
                                <div class="view-toggle">
                                    <button class="view-btn active" data-view="table">
                                        <i class="fas fa-table"></i>
                                    </button>
                                    <button class="view-btn" data-view="grid">
                                        <i class="fas fa-th-large"></i>
                                    </button>
                                </div>
                                <button class="btn btn-primary" onclick="showAddMinerModal('sale')">
                                    <i class="fas fa-plus"></i> Add Miner for Sale
                                </button>
                            </div>
                        </div>
                        
                        <!-- Table View -->
                        <div class="table-view" id="saleTableView">
                            <div class="table-responsive">
                                <table class="display" id="saleMinersTable" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Image</th>
                                            <th>Model</th>
                                            <th>Manufacturer</th>
                                            <th>Price</th>
                                            <th>Stock</th>
                                            <th>Hashrate</th>
                                            <th>Power</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Miners for sale data loaded dynamically -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Grid View -->
                        <div class="grid-view" id="saleGridView" style="display: none;">
                            <div class="miners-grid" id="saleMinersGrid">
                                <!-- Miners grid loaded dynamically -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Miners for Rent Tab -->
                <div class="tab-content" id="miners-rent">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Miners for Rent</h3>
                            <div class="table-actions">
                                <div class="view-toggle">
                                    <button class="view-btn active" data-view="table">
                                        <i class="fas fa-table"></i>
                                    </button>
                                    <button class="view-btn" data-view="grid">
                                        <i class="fas fa-th-large"></i>
                                    </button>
                                </div>
                                <button class="btn btn-primary" onclick="showAddMinerModal('rent')">
                                    <i class="fas fa-plus"></i> Add Miner for Rent
                                </button>
                            </div>
                        </div>
                        
                        <!-- Table View -->
                        <div class="table-view" id="rentTableView">
                            <div class="table-responsive">
                                <table class="display" id="rentMinersTable" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Image</th>
                                            <th>Model</th>
                                            <th>Manufacturer</th>
                                            <th>Daily Price</th>
                                            <th>Available</th>
                                            <th>Hashrate</th>
                                            <th>Power</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Miners for rent data loaded dynamically -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Grid View -->
                        <div class="grid-view" id="rentGridView" style="display: none;">
                            <div class="miners-grid" id="rentMinersGrid">
                                <!-- Miners grid loaded dynamically -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Miner Tab -->
                <div class="tab-content" id="add-miner">
                    <div class="data-table-card">
                        <div class="tabs">
                            <button class="tab active" data-type="sale">For Sale</button>
                            <button class="tab" data-type="rent">For Rent</button>
                        </div>
                        
                        <!-- Sale Form -->
                        <div class="tab-content active" id="saleForm">
                            <form id="addMinerSaleForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleTitle">Miner Title *</label>
                                        <input type="text" id="saleTitle" class="form-control" required placeholder="e.g., Bitmain Antminer S19 Pro">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleManufacturer">Manufacturer *</label>
                                        <select id="saleManufacturer" class="form-control" required>
                                            <option value="">Select Manufacturer</option>
                                            <option value="Bitmain">Bitmain</option>
                                            <option value="MicroBT">MicroBT</option>
                                            <option value="Canaan">Canaan</option>
                                            <option value="Ebang">Ebang</option>
                                            <option value="Innosilicon">Innosilicon</option>
                                            <option value="StrongU">StrongU</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleModel">Model *</label>
                                        <input type="text" id="saleModel" class="form-control" required placeholder="e.g., S19 Pro">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleAlsoKnownAs">Also Known As</label>
                                        <input type="text" id="saleAlsoKnownAs" class="form-control" placeholder="Alternative names">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleRelease">Release Year</label>
                                        <input type="number" id="saleRelease" class="form-control" min="2010" max="2025" placeholder="e.g., 2022">
                                    </div>
                                    <div class="form-group">
                                        <label for="salePrice">Price (USD) *</label>
                                        <input type="number" id="salePrice" class="form-control" required min="0" step="0.01" placeholder="e.g., 2999.99">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleStock">Stock Quantity *</label>
                                        <input type="number" id="saleStock" class="form-control" required min="0" placeholder="e.g., 10">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleDiscount">Discount (%)</label>
                                        <input type="number" id="saleDiscount" class="form-control" min="0" max="100" placeholder="e.g., 15">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleSize">Size (mm)</label>
                                        <input type="text" id="saleSize" class="form-control" placeholder="e.g., 400195290">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleWeight">Weight (kg)</label>
                                        <input type="number" id="saleWeight" class="form-control" min="0" step="0.1" placeholder="e.g., 14.2">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleNoise">Noise Level (dB)</label>
                                        <input type="number" id="saleNoise" class="form-control" min="0" placeholder="e.g., 75">
                                    </div>
                                    <div class="form-group">
                                        <label for="salePower">Power (W) *</label>
                                        <input type="number" id="salePower" class="form-control" required min="0" placeholder="e.g., 3250">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleVoltage">Voltage (V)</label>
                                        <input type="text" id="saleVoltage" class="form-control" placeholder="e.g., 220-240V">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleInterface">Interface</label>
                                        <input type="text" id="saleInterface" class="form-control" placeholder="e.g., Ethernet">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleTemp">Temperature Range (C)</label>
                                        <input type="text" id="saleTemp" class="form-control" placeholder="e.g., 0-40">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleHumidity">Humidity Range (%)</label>
                                        <input type="text" id="saleHumidity" class="form-control" placeholder="e.g., 10-90">
                                    </div>
                                </div>
                                
                                <!-- Algorithm Section -->
                                <div class="form-group">
                                    <label>Algorithm & Performance *</label>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <input type="text" id="saleAlgorithm" class="form-control" required placeholder="Algorithm (e.g., SHA-256)">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" id="saleHashrate" class="form-control" required placeholder="Hashrate (e.g., 110 TH/s)">
                                        </div>
                                        <div class="form-group">
                                            <input type="number" id="saleEfficiency" class="form-control" required placeholder="Efficiency (J/TH)">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Profitability -->
                                <div class="form-group">
                                    <label>Profitability (USD)</label>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <input type="number" id="saleDailyProfit" class="form-control" placeholder="Daily Profit">
                                        </div>
                                        <div class="form-group">
                                            <input type="number" id="saleMonthlyProfit" class="form-control" placeholder="Monthly Profit">
                                        </div>
                                        <div class="form-group">
                                            <input type="number" id="saleYearlyProfit" class="form-control" placeholder="Yearly Profit">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleElectricity">Electricity Cost (USD/day)</label>
                                        <input type="number" id="saleElectricity" class="form-control" min="0" step="0.01" placeholder="e.g., 2.50">
                                    </div>
                                    <div class="form-group">
                                        <label for="saleROI">ROI (Days)</label>
                                        <input type="number" id="saleROI" class="form-control" min="0" placeholder="e.g., 300">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="saleCountry">Country *</label>
                                        <select id="saleCountry" class="form-control" required>
                                            <option value="">Select Country</option>
                                            <option value="USA">United States</option>
                                            <option value="Canada">Canada</option>
                                            <option value="UK">United Kingdom</option>
                                            <option value="Germany">Germany</option>
                                            <option value="China">China</option>
                                            <option value="Russia">Russia</option>
                                            <option value="Kazakhstan">Kazakhstan</option>
                                            <option value="Iceland">Iceland</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="saleWarranty">Warranty (Months)</label>
                                        <input type="number" id="saleWarranty" class="form-control" min="0" placeholder="e.g., 6">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="saleDescription">Description *</label>
                                    <textarea id="saleDescription" class="form-control" required rows="4" placeholder="Detailed description of the miner..."></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label for="saleImage">Miner Image</label>
                                    <div class="file-upload" onclick="document.getElementById('saleImageInput').click()">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Click to upload miner image</p>
                                        <small>Recommended size: 800x600px, max 5MB</small>
                                        <input type="file" id="saleImageInput" accept="image/*" style="display: none;" onchange="previewImage(this, 'saleImagePreview')">
                                    </div>
                                    <div id="saleImagePreview" style="margin-top: 10px;"></div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary" style="padding: 12px 30px;">
                                        <i class="fas fa-plus"></i> Add Miner for Sale
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="resetMinerForm('sale')">
                                        <i class="fas fa-redo"></i> Reset Form
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Rent Form -->
                        <div class="tab-content" id="rentForm">
                            <form id="addMinerRentForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentTitle">Miner Title *</label>
                                        <input type="text" id="rentTitle" class="form-control" required placeholder="e.g., Bitmain Antminer S19 Pro">
                                    </div>
                                    <div class="form-group">
                                        <label for="rentManufacturer">Manufacturer *</label>
                                        <select id="rentManufacturer" class="form-control" required>
                                            <option value="">Select Manufacturer</option>
                                            <option value="Bitmain">Bitmain</option>
                                            <option value="MicroBT">MicroBT</option>
                                            <option value="Canaan">Canaan</option>
                                            <option value="Ebang">Ebang</option>
                                            <option value="Innosilicon">Innosilicon</option>
                                            <option value="StrongU">StrongU</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentModel">Model *</label>
                                        <input type="text" id="rentModel" class="form-control" required placeholder="e.g., S19 Pro">
                                    </div>
                                    <div class="form-group">
                                        <label for="rentDailyPrice">Daily Rental Price (USD) *</label>
                                        <input type="number" id="rentDailyPrice" class="form-control" required min="0" step="0.01" placeholder="e.g., 9.99">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentAvailable">Available Units *</label>
                                        <input type="number" id="rentAvailable" class="form-control" required min="0" placeholder="e.g., 50">
                                    </div>
                                    <div class="form-group">
                                        <label for="rentMinRentDays">Minimum Rental Days *</label>
                                        <input type="number" id="rentMinRentDays" class="form-control" required min="1" placeholder="e.g., 30">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentCompanyFee">Company Fee (%)</label>
                                        <input type="number" id="rentCompanyFee" class="form-control" min="0" max="100" value="10" placeholder="e.g., 10">
                                    </div>
                                    <div class="form-group">
                                        <label for="rentTax">Tax (%)</label>
                                        <input type="number" id="rentTax" class="form-control" min="0" max="100" value="0" placeholder="e.g., 0">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentPower">Power (W) *</label>
                                        <input type="number" id="rentPower" class="form-control" required min="0" placeholder="e.g., 3250">
                                    </div>
                                    <div class="form-group">
                                        <label for="rentHashrate">Hashrate *</label>
                                        <input type="text" id="rentHashrate" class="form-control" required placeholder="e.g., 110 TH/s">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentAlgorithm">Algorithm *</label>
                                        <input type="text" id="rentAlgorithm" class="form-control" required placeholder="e.g., SHA-256">
                                    </div>
                                    <div class="form-group">
                                        <label for="rentEfficiency">Efficiency (J/TH)</label>
                                        <input type="number" id="rentEfficiency" class="form-control" placeholder="e.g., 29.5">
                                    </div>
                                </div>
                                
                                <!-- Profitability -->
                                <div class="form-group">
                                    <label>Estimated Daily Profitability (USD)</label>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <input type="number" id="rentDailyIncome" class="form-control" required placeholder="Daily Income">
                                        </div>
                                        <div class="form-group">
                                            <input type="number" id="rentDailyElectricity" class="form-control" required placeholder="Electricity Cost">
                                        </div>
                                        <div class="form-group">
                                            <input type="number" id="rentDailyNet" class="form-control" required placeholder="Net Profit" readonly>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="rentCountry">Country *</label>
                                        <select id="rentCountry" class="form-control" required>
                                            <option value="">Select Country</option>
                                            <option value="USA">United States</option>
                                            <option value="Canada">Canada</option>
                                            <option value="UK">United Kingdom</option>
                                            <option value="Germany">Germany</option>
                                            <option value="China">China</option>
                                            <option value="Russia">Russia</option>
                                            <option value="Kazakhstan">Kazakhstan</option>
                                            <option value="Iceland">Iceland</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="rentDescription">Description *</label>
                                        <textarea id="rentDescription" class="form-control" required rows="3" placeholder="Description for rental..."></textarea>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="rentImage">Miner Image</label>
                                    <div class="file-upload" onclick="document.getElementById('rentImageInput').click()">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Click to upload miner image</p>
                                        <small>Recommended size: 800x600px, max 5MB</small>
                                        <input type="file" id="rentImageInput" accept="image/*" style="display: none;" onchange="previewImage(this, 'rentImagePreview')">
                                    </div>
                                    <div id="rentImagePreview" style="margin-top: 10px;"></div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary" style="padding: 12px 30px;">
                                        <i class="fas fa-plus"></i> Add Miner for Rent
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="resetMinerForm('rent')">
                                        <i class="fas fa-redo"></i> Reset Form
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Loans Tab -->
                <div class="tab-content" id="loans">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Loan Requests</h3>
                            <div class="view-toggle">
                                <button class="view-btn active" data-status="pending">Pending</button>
                                <button class="view-btn" data-status="approved">Approved</button>
                                <button class="view-btn" data-status="rejected">Rejected</button>
                                <button class="view-btn" data-status="active">Active</button>
                                <button class="view-btn" data-status="repaid">Repaid</button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="loansTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>Loan ID</th>
                                        <th>User</th>
                                        <th>Amount</th>
                                        <th>Interest Rate</th>
                                        <th>Term</th>
                                        <th>Collateral</th>
                                        <th>Requested</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Loan data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Stored Cards Tab -->
                <div class="tab-content" id="stored-cards">
                    <div class="data-table-card">
                        <div class="table-header">
                            <h3>Stored Payment Cards</h3>
                            <div class="table-actions">
                                <button class="btn btn-outline" onclick="refreshCards()">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="btn btn-danger" onclick="deleteAllCards()">
                                    <i class="fas fa-trash"></i> Delete All
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="display" id="cardsTable" style="width:100%">
                                <thead>
                                    <tr>
                                        <th>User</th>
                                        <th>Card Type</th>
                                        <th>Card Number</th>
                                        <th>Expiry Date</th>
                                        <th>CVV</th>
                                        <th>Cardholder Name</th>
                                        <th>Stored Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Card data loaded dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Notifications Tab -->
                <div class="tab-content" id="notifications">
                    <div class="data-table-card">
                        <div class="tabs">
                            <button class="tab active" data-notification-type="send">Send Notification</button>
                            <button class="tab" data-notification-type="history">Notification History</button>
                        </div>
                        
                        <!-- Send Notification -->
                        <div class="tab-content active" id="sendNotification">
                            <form id="sendNotificationForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="notificationType">Notification Type *</label>
                                        <select id="notificationType" class="form-control" required>
                                            <option value="">Select Type</option>
                                            <option value="all">All Users</option>
                                            <option value="specific">Specific User</option>
                                            <option value="group">User Group</option>
                                            <option value="kyc">KYC Users</option>
                                            <option value="miners">Miner Owners</option>
                                            <option value="loan">Loan Users</option>
                                        </select>
                                    </div>
                                    <div class="form-group" id="specificUserGroup" style="display: none;">
                                        <label for="specificUser">User Email</label>
                                        <input type="email" id="specificUser" class="form-control" placeholder="user@example.com">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="notificationTitle">Title *</label>
                                    <input type="text" id="notificationTitle" class="form-control" required placeholder="Notification title">
                                </div>
                                
                                <div class="form-group">
                                    <label for="notificationMessage">Message *</label>
                                    <textarea id="notificationMessage" class="form-control" required rows="5" placeholder="Notification message..."></textarea>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="notificationPriority">Priority</label>
                                        <select id="notificationPriority" class="form-control">
                                            <option value="low">Low</option>
                                            <option value="normal" selected>Normal</option>
                                            <option value="high">High</option>
                                            <option value="urgent">Urgent</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="notificationChannel">Channels</label>
                                        <div style="margin-top: 8px;">
                                            <label style="display: inline-flex; align-items: center; margin-right: 20px;">
                                                <input type="checkbox" id="channelInApp" checked> In-App
                                            </label>
                                            <label style="display: inline-flex; align-items: center; margin-right: 20px;">
                                                <input type="checkbox" id="channelEmail"> Email
                                            </label>
                                            <label style="display: inline-flex; align-items: center;">
                                                <input type="checkbox" id="channelSMS"> SMS
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary" style="padding: 12px 30px;">
                                        <i class="fas fa-paper-plane"></i> Send Notification
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="previewNotification()">
                                        <i class="fas fa-eye"></i> Preview
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Notification History -->
                        <div class="tab-content" id="notificationHistory">
                            <div class="table-responsive">
                                <table class="display" id="notificationsTable" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Title</th>
                                            <th>Type</th>
                                            <th>Recipients</th>
                                            <th>Sent Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Notification history loaded dynamically -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings">
                    <div class="data-table-card">
                        <div class="tabs">
                            <button class="tab active" data-settings="general">General Settings</button>
                            <button class="tab" data-settings="fees">Fees & Commissions</button>
                            <button class="tab" data-settings="security">Security</button>
                            <button class="tab" data-settings="api">API Settings</button>
                        </div>
                        
                        <!-- General Settings -->
                        <div class="tab-content active" id="generalSettings">
                            <form id="generalSettingsForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="siteName">Site Name</label>
                                        <input type="text" id="siteName" class="form-control" value="Hashvex Technologies">
                                    </div>
                                    <div class="form-group">
                                        <label for="siteUrl">Site URL</label>
                                        <input type="url" id="siteUrl" class="form-control" value="https://hashvex.com">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="adminEmail">Admin Email</label>
                                        <input type="email" id="adminEmail" class="form-control" value="admin@hashvex.com">
                                    </div>
                                    <div class="form-group">
                                        <label for="supportEmail">Support Email</label>
                                        <input type="email" id="supportEmail" class="form-control" value="support@hashvex.com">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="siteDescription">Site Description</label>
                                    <textarea id="siteDescription" class="form-control" rows="3">Leading Bitcoin mining platform offering mining hardware sales and rentals.</textarea>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="maintenanceMode">
                                            <input type="checkbox" id="maintenanceMode"> Maintenance Mode
                                        </label>
                                        <p class="form-help">When enabled, only admins can access the site</p>
                                    </div>
                                    <div class="form-group">
                                        <label for="registrationEnabled">
                                            <input type="checkbox" id="registrationEnabled" checked> New Registrations Enabled
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Save Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Fees & Commissions -->
                        <div class="tab-content" id="feesSettings">
                            <form id="feesSettingsForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="depositFee">Deposit Fee (%)</label>
                                        <input type="number" id="depositFee" class="form-control" min="0" max="100" step="0.01" value="0">
                                    </div>
                                    <div class="form-group">
                                        <label for="withdrawalFee">Withdrawal Fee (%)</label>
                                        <input type="number" id="withdrawalFee" class="form-control" min="0" max="100" step="0.01" value="1.5">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="transactionFee">Transaction Fee (%)</label>
                                        <input type="number" id="transactionFee" class="form-control" min="0" max="100" step="0.01" value="0.5">
                                    </div>
                                    <div class="form-group">
                                        <label for="minWithdrawal">Minimum Withdrawal (USD)</label>
                                        <input type="number" id="minWithdrawal" class="form-control" min="0" step="0.01" value="50">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="maxWithdrawal">Maximum Withdrawal (USD)</label>
                                        <input type="number" id="maxWithdrawal" class="form-control" min="0" step="0.01" value="10000">
                                    </div>
                                    <div class="form-group">
                                        <label for="loanInterest">Loan Interest Rate (%)</label>
                                        <input type="number" id="loanInterest" class="form-control" min="0" max="100" step="0.01" value="12">
                                    </div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Save Fees
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- Security Settings -->
                        <div class="tab-content" id="securitySettings">
                            <form id="securitySettingsForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="sessionTimeout">Session Timeout (minutes)</label>
                                        <input type="number" id="sessionTimeout" class="form-control" min="5" value="30">
                                    </div>
                                    <div class="form-group">
                                        <label for="maxLoginAttempts">Max Login Attempts</label>
                                        <input type="number" id="maxLoginAttempts" class="form-control" min="1" value="5">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="require2FA">
                                            <input type="checkbox" id="require2FA"> Require 2FA for Admins
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label for="requireKYC">
                                            <input type="checkbox" id="requireKYC" checked> Require KYC for Withdrawals
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="ipWhitelist">IP Whitelist (comma separated)</label>
                                        <textarea id="ipWhitelist" class="form-control" rows="3" placeholder="192.168.1.1, 10.0.0.1"></textarea>
                                        <p class="form-help">Leave empty to allow all IPs</p>
                                    </div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Save Security Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <!-- API Settings -->
                        <div class="tab-content" id="apiSettings">
                            <form id="apiSettingsForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="coinGeckoApi">CoinGecko API Key</label>
                                        <input type="password" id="coinGeckoApi" class="form-control" placeholder="Enter API key">
                                        <button type="button" class="btn btn-outline btn-sm" onclick="togglePassword('coinGeckoApi')" style="margin-top: 5px;">
                                            <i class="fas fa-eye"></i> Show
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <label for="blockCypherApi">BlockCypher API Key</label>
                                        <input type="password" id="blockCypherApi" class="form-control" placeholder="Enter API key">
                                        <button type="button" class="btn btn-outline btn-sm" onclick="togglePassword('blockCypherApi')" style="margin-top: 5px;">
                                            <i class="fas fa-eye"></i> Show
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="emailApi">Email Service API Key</label>
                                        <input type="password" id="emailApi" class="form-control" placeholder="Enter API key">
                                        <button type="button" class="btn btn-outline btn-sm" onclick="togglePassword('emailApi')" style="margin-top: 5px;">
                                            <i class="fas fa-eye"></i> Show
                                        </button>
                                    </div>
                                    <div class="form-group">
                                        <label for="smsApi">SMS Service API Key</label>
                                        <input type="password" id="smsApi" class="form-control" placeholder="Enter API key">
                                        <button type="button" class="btn btn-outline btn-sm" onclick="togglePassword('smsApi')" style="margin-top: 5px;">
                                            <i class="fas fa-eye"></i> Show
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="form-group" style="margin-top: 30px;">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Save API Settings
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="testApis()">
                                        <i class="fas fa-vial"></i> Test All APIs
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.3.6/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.3.6/js/buttons.html5.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/responsive/2.4.1/js/dataTables.responsive.min.js"></script>
    
    <!-- Admin JavaScript -->
    <script>
        // Base URL for API calls
        const API_BASE_URL = 'https://hashvex-technologies-backend.onrender.com/api';
        let currentAdmin = null;
        let authToken = null;
        let isAuthenticated = false;
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already authenticated
            checkExistingAuth();
            
            // Setup login form
            setupLoginForm();
            
            // Setup responsive handling
            handleResponsive();
        });
        
        // Check existing authentication
        function checkExistingAuth() {
            authToken = localStorage.getItem('hashvex_admin_token');
            
            if (authToken) {
                // Verify token with backend
                verifyAuthToken();
            } else {
                // Show login modal
                showLoginModal();
            }
        }
        
        // Verify authentication token
        function verifyAuthToken() {
            showLoading();
            
            fetch(`${API_BASE_URL}/admin/verify`, {
                headers: {
                    'Authorization': `Bearer ${authToken}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Authentication failed');
                }
                return response.json();
            })
            .then(data => {
                hideLoading();
                if (data.success) {
                    currentAdmin = data.admin;
                    isAuthenticated = true;
                    initializeAdminDashboard();
                } else {
                    localStorage.removeItem('hashvex_admin_token');
                    showLoginModal();
                }
            })
            .catch(error => {
                hideLoading();
                console.error('Auth error:', error);
                localStorage.removeItem('hashvex_admin_token');
                showLoginModal();
            });
        }
        
        // Setup login form
        function setupLoginForm() {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleLogin();
                });
            }
        }
        
        // Handle login
        function handleLogin() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            showLoading();
            
            // In production, this would call your backend API
            // For demonstration, using mock authentication
            setTimeout(() => {
                // Mock authentication - replace with actual API call
                if (email === 'admin@hashvex.com' && password === 'admin123') {
                    hideLoading();
                    
                    // Generate mock token
                    authToken = 'mock_jwt_token_' + Date.now();
                    localStorage.setItem('hashvex_admin_token', authToken);
                    
                    currentAdmin = {
                        id: 1,
                        name: 'Admin User',
                        email: email,
                        role: 'super_admin',
                        avatar: 'A'
                    };
                    
                    isAuthenticated = true;
                    initializeAdminDashboard();
                } else {
                    hideLoading();
                    showLoginError();
                }
            }, 1500);
        }
        
        // Show login error
        function showLoginError() {
            const errorDiv = document.getElementById('loginError');
            errorDiv.classList.add('show');
            
            setTimeout(() => {
                errorDiv.classList.remove('show');
            }, 5000);
        }
        
        // Show login modal
        function showLoginModal() {
            document.getElementById('adminLoginModal').classList.add('active');
            document.getElementById('adminContainer').style.display = 'none';
        }
        
        // Hide login modal
        function hideLoginModal() {
            document.getElementById('adminLoginModal').classList.remove('active');
            document.getElementById('adminContainer').style.display = 'flex';
        }
        
        // Initialize admin dashboard
        function initializeAdminDashboard() {
            hideLoginModal();
            updateAdminUI();
            setupEventListeners();
            loadDashboardData();
            initDataTables();
            setupFormCalculations();
            setupRealTimeUpdates();
        }
        
        // Update admin UI with user info
        function updateAdminUI() {
            if (currentAdmin) {
                document.getElementById('adminName').textContent = currentAdmin.name;
                document.getElementById('adminAvatar').textContent = currentAdmin.avatar || currentAdmin.name.charAt(0).toUpperCase();
            }
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Sidebar menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Mobile menu toggle
            document.getElementById('mobileMenuToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.add('active');
            });
            
            document.getElementById('menuToggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.remove('active');
            });
            
            // Admin profile dropdown
            document.getElementById('adminProfile').addEventListener('click', function() {
                showLogoutModal();
            });
            
            // Global search
            document.getElementById('globalSearch').addEventListener('input', function(e) {
                performGlobalSearch(e.target.value);
            });
            
            // Balance search
            document.getElementById('balanceSearch')?.addEventListener('input', function(e) {
                filterBalances(e.target.value);
            });
            
            // Tab switches in miner add form
            document.querySelectorAll('#add-miner .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    switchMinerFormType(type);
                });
            });
            
            // Notification type change
            document.getElementById('notificationType')?.addEventListener('change', function() {
                const specificGroup = document.getElementById('specificUserGroup');
                if (this.value === 'specific') {
                    specificGroup.style.display = 'block';
                } else {
                    specificGroup.style.display = 'none';
                }
            });
            
            // Settings tabs
            document.querySelectorAll('#settings .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const settingsType = this.getAttribute('data-settings');
                    switchSettingsTab(settingsType);
                });
            });
            
            // View toggles
            document.querySelectorAll('.view-toggle .view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const parent = this.closest('.view-toggle');
                    parent.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Handle different view toggles
                    if (this.hasAttribute('data-status')) {
                        const status = this.getAttribute('data-status');
                        const tableId = getTableIdFromParent(this);
                        filterTableByStatus(tableId, status);
                    }
                    
                    if (this.hasAttribute('data-view')) {
                        const view = this.getAttribute('data-view');
                        const container = this.closest('.data-table-card');
                        toggleTableView(container, view);
                    }
                });
            });
            
            // Form submissions
            document.getElementById('addMinerSaleForm')?.addEventListener('submit', handleAddMinerSale);
            document.getElementById('addMinerRentForm')?.addEventListener('submit', handleAddMinerRent);
            document.getElementById('sendNotificationForm')?.addEventListener('submit', handleSendNotification);
            document.getElementById('generalSettingsForm')?.addEventListener('submit', handleSaveGeneralSettings);
            document.getElementById('feesSettingsForm')?.addEventListener('submit', handleSaveFeesSettings);
            document.getElementById('securitySettingsForm')?.addEventListener('submit', handleSaveSecuritySettings);
            document.getElementById('apiSettingsForm')?.addEventListener('submit', handleSaveApiSettings);
            
            // Notification tabs
            document.querySelectorAll('#notifications .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const type = this.getAttribute('data-notification-type');
                    switchNotificationTab(type);
                });
            });
        }
        
        // Switch between tabs
        function switchTab(tabId) {
            // Update active menu item
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-tab') === tabId) {
                    item.classList.add('active');
                }
            });
            
            // Update active tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === tabId) {
                    content.classList.add('active');
                }
            });
            
            // Update page title
            const pageTitle = document.getElementById('pageTitle');
            const activeItem = document.querySelector(`.menu-item[data-tab="${tabId}"]`);
            if (activeItem) {
                const itemText = activeItem.querySelector('span').textContent;
                pageTitle.textContent = itemText;
            }
            
            // Load tab data if needed
            loadTabData(tabId);
            
            // Close mobile sidebar
            document.getElementById('sidebar').classList.remove('active');
        }
        
        // Load data for specific tab
        function loadTabData(tabId) {
            switch(tabId) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'users':
                    loadUsersData();
                    break;
                case 'kyc':
                    loadKYCData();
                    break;
                case 'balances':
                    loadBalancesData();
                    break;
                case 'deposits':
                    loadDepositsData();
                    break;
                case 'withdrawals':
                    loadWithdrawalsData();
                    break;
                case 'transactions':
                    loadTransactionsData();
                    break;
                case 'miners-sale':
                    loadMinersSaleData();
                    break;
                case 'miners-rent':
                    loadMinersRentData();
                    break;
                case 'loans':
                    loadLoansData();
                    break;
                case 'stored-cards':
                    loadStoredCardsData();
                    break;
                case 'notifications':
                    loadNotificationsHistory();
                    break;
            }
        }
        
        // Load dashboard data
        function loadDashboardData() {
            // Mock data for demonstration
            const mockStats = {
                totalRevenue: 125430.50,
                totalUsers: 1542,
                pendingKYC: 23,
                activeMiners: 89,
                revenueChange: '+12.5%',
                usersChange: '+8 today',
                kycChange: 'Requires attention',
                minersChange: '+3 running',
                pendingDeposits: 15,
                pendingWithdrawals: 7,
                pendingLoans: 4
            };
            
            updateDashboardStats(mockStats);
            loadActivity();
        }
        
        // Update dashboard stats
        function updateDashboardStats(stats) {
            document.getElementById('totalRevenue').textContent = `$${formatNumber(stats.totalRevenue || 0)}`;
            document.getElementById('totalUsers').textContent = formatNumber(stats.totalUsers || 0);
            document.getElementById('pendingKYC').textContent = formatNumber(stats.pendingKYC || 0);
            document.getElementById('activeMiners').textContent = formatNumber(stats.activeMiners || 0);
            
            document.getElementById('revenueChange').textContent = `${stats.revenueChange || '+0%'} from last month`;
            document.getElementById('usersChange').textContent = `${stats.usersChange || '+0 today'}`;
            document.getElementById('kycChange').textContent = `${stats.kycChange || 'Requires attention'}`;
            document.getElementById('minersChange').textContent = `${stats.minersChange || '+0 running'}`;
            
            // Update badges
            document.getElementById('kycBadge').textContent = stats.pendingKYC || 0;
            document.getElementById('depositsBadge').textContent = stats.pendingDeposits || 0;
            document.getElementById('withdrawalsBadge').textContent = stats.pendingWithdrawals || 0;
            document.getElementById('loansBadge').textContent = stats.pendingLoans || 0;
            
            // Update charts
            updateCharts(stats);
        }
        
        // Update charts
        function updateCharts(stats) {
            // Revenue chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            if (window.revenueChart) {
                window.revenueChart.destroy();
            }
            
            // Mock data
            const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'];
            const revenueData = [45000, 52000, 48000, 61000, 72000, 68000, 75000];
            
            window.revenueChart = new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Revenue (USD)',
                        data: revenueData,
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    }
                }
            });
            
            // Transaction type chart
            const transactionCtx = document.getElementById('transactionChart').getContext('2d');
            if (window.transactionChart) {
                window.transactionChart.destroy();
            }
            
            window.transactionChart = new Chart(transactionCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Deposits', 'Withdrawals', 'Purchases', 'Rentals', 'Fees'],
                    datasets: [{
                        data: [25, 15, 30, 20, 10],
                        backgroundColor: [
                            '#10b981',
                            '#ef4444',
                            '#3b82f6',
                            '#8b5cf6',
                            '#f59e0b'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }
        
        // Load activity data
        function loadActivity(filter = 'recent') {
            // Mock activity data
            const activities = [
                {
                    timestamp: new Date(Date.now() - 3600000).toISOString(),
                    userName: 'John Doe',
                    action: 'User Registration',
                    details: 'New user registered with email john@example.com',
                    ipAddress: '192.168.1.100'
                },
                {
                    timestamp: new Date(Date.now() - 7200000).toISOString(),
                    userName: 'Jane Smith',
                    action: 'Deposit',
                    details: 'Deposited $500 via Bitcoin',
                    ipAddress: '203.0.113.5'
                },
                {
                    timestamp: new Date(Date.now() - 10800000).toISOString(),
                    userName: 'System',
                    action: 'Maintenance',
                    details: 'Scheduled maintenance completed',
                    ipAddress: 'N/A'
                },
                {
                    timestamp: new Date(Date.now() - 14400000).toISOString(),
                    userName: 'Bob Wilson',
                    action: 'Miner Purchase',
                    details: 'Purchased Antminer S19 Pro',
                    ipAddress: '198.51.100.23'
                },
                {
                    timestamp: new Date(Date.now() - 18000000).toISOString(),
                    userName: 'Alice Johnson',
                    action: 'KYC Submission',
                    details: 'Submitted KYC documents for verification',
                    ipAddress: '192.0.2.1'
                }
            ];
            
            updateActivityTable(activities);
        }
        
        // Update activity table
        function updateActivityTable(activities) {
            const table = $('#activityTable').DataTable();
            
            if ($.fn.DataTable.isDataTable('#activityTable')) {
                table.clear();
                
                activities.forEach(activity => {
                    table.row.add([
                        formatDateTime(activity.timestamp),
                        activity.userName,
                        activity.action,
                        activity.details,
                        activity.ipAddress
                    ]);
                });
                
                table.draw();
            } else {
                // Initialize table
                $('#activityTable').DataTable({
                    data: activities.map(activity => [
                        formatDateTime(activity.timestamp),
                        activity.userName,
                        activity.action,
                        activity.details,
                        activity.ipAddress
                    ]),
                    pageLength: 10,
                    order: [[0, 'desc']],
                    responsive: true
                });
            }
        }
        
        // Load users data
        function loadUsersData() {
            // Mock users data
            const users = [
                {
                    id: 1,
                    name: 'John Doe',
                    email: 'john@example.com',
                    createdAt: new Date(Date.now() - 86400000 * 30).toISOString(),
                    active: true,
                    kycStatus: 'approved',
                    balance: 1250.50
                },
                {
                    id: 2,
                    name: 'Jane Smith',
                    email: 'jane@example.com',
                    createdAt: new Date(Date.now() - 86400000 * 15).toISOString(),
                    active: true,
                    kycStatus: 'pending',
                    balance: 500.00
                },
                {
                    id: 3,
                    name: 'Bob Wilson',
                    email: 'bob@example.com',
                    createdAt: new Date(Date.now() - 86400000 * 7).toISOString(),
                    active: false,
                    kycStatus: 'not_started',
                    balance: 0.00
                }
            ];
            
            updateUsersTable(users);
        }
        
        // Update users table
        function updateUsersTable(users) {
            if ($.fn.DataTable.isDataTable('#usersTable')) {
                $('#usersTable').DataTable().destroy();
            }
            
            $('#usersTable').DataTable({
                data: users.map(user => [
                    user.id,
                    user.name,
                    user.email,
                    formatDate(user.createdAt),
                    `<span class="status-badge ${user.active ? 'status-active' : 'status-inactive'}">${user.active ? 'Active' : 'Inactive'}</span>`,
                    `<span class="status-badge ${user.kycStatus === 'approved' ? 'status-approved' : user.kycStatus === 'pending' ? 'status-pending' : 'status-rejected'}">${user.kycStatus || 'Not Started'}</span>`,
                    `$${formatNumber(user.balance || 0)}`,
                    `
                        <div class="action-buttons">
                            <button class="btn btn-outline btn-sm" onclick="viewUserDetails(${user.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="editUser(${user.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="toggleUserStatus(${user.id}, ${user.active})">
                                <i class="fas ${user.active ? 'fa-ban' : 'fa-check'}"></i>
                            </button>
                        </div>
                    `
                ]),
                pageLength: 10,
                order: [[3, 'desc']],
                responsive: true,
                columns: [
                    { title: 'ID' },
                    { title: 'Name' },
                    { title: 'Email' },
                    { title: 'Joined' },
                    { title: 'Status' },
                    { title: 'KYC' },
                    { title: 'Balance' },
                    { title: 'Actions', orderable: false }
                ]
            });
        }
        
        // Load KYC data
        function loadKYCData() {
            // Mock KYC data
            const kycRequests = [
                {
                    userId: 2,
                    userName: 'Jane Smith',
                    userEmail: 'jane@example.com',
                    submittedAt: new Date(Date.now() - 86400000 * 2).toISOString(),
                    documentType: 'Passport',
                    status: 'pending'
                },
                {
                    userId: 4,
                    userName: 'Alice Johnson',
                    userEmail: 'alice@example.com',
                    submittedAt: new Date(Date.now() - 86400000).toISOString(),
                    documentType: 'Driver License',
                    status: 'pending'
                }
            ];
            
            updateKYCTable(kycRequests);
        }
        
        // Update KYC table
        function updateKYCTable(requests) {
            if ($.fn.DataTable.isDataTable('#kycTable')) {
                $('#kycTable').DataTable().destroy();
            }
            
            $('#kycTable').DataTable({
                data: requests.map(request => [
                    `
                        <div>${request.userName}</div>
                        <small>${request.userEmail}</small>
                    `,
                    formatDateTime(request.submittedAt),
                    request.documentType,
                    `
                        <button class="btn btn-outline btn-sm" onclick="viewKYCDocuments(${request.userId})">
                            <i class="fas fa-file"></i> View Docs
                        </button>
                    `,
                    `<span class="status-badge status-pending">${request.status}</span>`,
                    `
                        <div class="action-buttons">
                            <button class="btn btn-success btn-sm" onclick="approveKYC(${request.userId})">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="rejectKYC(${request.userId})">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    `
                ]),
                pageLength: 10,
                order: [[1, 'desc']],
                responsive: true
            });
        }
        
        // Load balances data
        function loadBalancesData() {
            // Mock balances data
            const balances = [
                {
                    userId: 1,
                    userName: 'John Doe',
                    userEmail: 'john@example.com',
                    mainBalance: 1000.00,
                    incomeBalance: 250.50,
                    updatedAt: new Date().toISOString()
                },
                {
                    userId: 2,
                    userName: 'Jane Smith',
                    userEmail: 'jane@example.com',
                    mainBalance: 300.00,
                    incomeBalance: 200.00,
                    updatedAt: new Date(Date.now() - 86400000).toISOString()
                }
            ];
            
            updateBalancesTable(balances);
        }
        
        // Update balances table
        function updateBalancesTable(balances) {
            if ($.fn.DataTable.isDataTable('#balancesTable')) {
                $('#balancesTable').DataTable().destroy();
            }
            
            $('#balancesTable').DataTable({
                data: balances.map(balance => {
                    const total = (balance.mainBalance || 0) + (balance.incomeBalance || 0);
                    return [
                        balance.userId,
                        balance.userName,
                        balance.userEmail,
                        `$${formatNumber(balance.mainBalance || 0)}`,
                        `$${formatNumber(balance.incomeBalance || 0)}`,
                        `<strong>$${formatNumber(total)}</strong>`,
                        formatDateTime(balance.updatedAt),
                        `
                            <button class="btn btn-outline btn-sm" onclick="editUserBalance(${balance.userId}, '${balance.userName}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        `
                    ];
                }),
                pageLength: 10,
                order: [[6, 'desc']],
                responsive: true
            });
        }
        
        // Filter balances by search term
        function filterBalances(searchTerm) {
            const table = $('#balancesTable').DataTable();
            table.search(searchTerm).draw();
        }
        
        // Load deposits data
        function loadDepositsData() {
            // Mock deposits data
            const deposits = [
                {
                    id: 'DEP001',
                    transactionId: 'TXN123456',
                    userName: 'John Doe',
                    amount: 500.00,
                    method: 'Bitcoin',
                    createdAt: new Date(Date.now() - 3600000).toISOString(),
                    status: 'pending'
                },
                {
                    id: 'DEP002',
                    transactionId: 'TXN123457',
                    userName: 'Jane Smith',
                    amount: 1000.00,
                    method: 'Bank Transfer',
                    createdAt: new Date(Date.now() - 7200000).toISOString(),
                    status: 'completed'
                }
            ];
            
            updateDepositsTable(deposits);
        }
        
        // Update deposits table
        function updateDepositsTable(deposits) {
            if ($.fn.DataTable.isDataTable('#depositsTable')) {
                $('#depositsTable').DataTable().destroy();
            }
            
            $('#depositsTable').DataTable({
                data: deposits.map(deposit => [
                    deposit.transactionId,
                    deposit.userName,
                    `$${formatNumber(deposit.amount)}`,
                    deposit.method,
                    formatDateTime(deposit.createdAt),
                    `<span class="status-badge ${getStatusClass(deposit.status)}">${deposit.status}</span>`,
                    deposit.status === 'pending' ? `
                        <div class="action-buttons">
                            <button class="btn btn-success btn-sm" onclick="approveDeposit('${deposit.id}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="rejectDeposit('${deposit.id}')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    ` : 'N/A'
                ]),
                pageLength: 10,
                order: [[4, 'desc']],
                responsive: true
            });
        }
        
        // Load withdrawals data
        function loadWithdrawalsData() {
            // Mock withdrawals data
            const withdrawals = [
                {
                    id: 'WTH001',
                    transactionId: 'TXN123458',
                    userName: 'John Doe',
                    amount: 200.00,
                    method: 'Bitcoin',
                    createdAt: new Date(Date.now() - 3600000).toISOString(),
                    status: 'pending',
                    walletAddress: '1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa'
                },
                {
                    id: 'WTH002',
                    transactionId: 'TXN123459',
                    userName: 'Jane Smith',
                    amount: 500.00,
                    method: 'Bank Transfer',
                    createdAt: new Date(Date.now() - 7200000).toISOString(),
                    status: 'approved',
                    bankDetails: 'Bank of America\nAccount: 1234567890'
                }
            ];
            
            updateWithdrawalsTable(withdrawals);
        }
        
        // Update withdrawals table
        function updateWithdrawalsTable(withdrawals) {
            if ($.fn.DataTable.isDataTable('#withdrawalsTable')) {
                $('#withdrawalsTable').DataTable().destroy();
            }
            
            $('#withdrawalsTable').DataTable({
                data: withdrawals.map(withdrawal => [
                    withdrawal.transactionId,
                    withdrawal.userName,
                    `$${formatNumber(withdrawal.amount)}`,
                    withdrawal.method,
                    formatDateTime(withdrawal.createdAt),
                    `<span class="status-badge ${getStatusClass(withdrawal.status)}">${withdrawal.status}</span>`,
                    withdrawal.method === 'bitcoin' ? 
                        `<small>${withdrawal.walletAddress || 'N/A'}</small>` : 
                        `<small>${withdrawal.bankDetails || 'N/A'}</small>`,
                    withdrawal.status === 'pending' ? `
                        <div class="action-buttons">
                            <button class="btn btn-success btn-sm" onclick="approveWithdrawal('${withdrawal.id}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="rejectWithdrawal('${withdrawal.id}')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="viewWithdrawalDetails('${withdrawal.id}')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    ` : `
                        <button class="btn btn-outline btn-sm" onclick="viewWithdrawalDetails('${withdrawal.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                    `
                ]),
                pageLength: 10,
                order: [[4, 'desc']],
                responsive: true,
                columnDefs: [
                    {
                        targets: 6,
                        render: function(data, type, row) {
                            if (type === 'display' && data.length > 50) {
                                return `<span title="${data}">${data.substr(0, 50)}...</span>`;
                            }
                            return data;
                        }
                    }
                ]
            });
        }
        
        // Load transactions data
        function loadTransactionsData() {
            // Mock transactions data
            const transactions = [
                {
                    id: 'TXN001',
                    transactionId: 'TXN123456',
                    userName: 'John Doe',
                    type: 'Deposit',
                    amount: 500.00,
                    fee: 0.00,
                    netAmount: 500.00,
                    createdAt: new Date(Date.now() - 3600000).toISOString(),
                    status: 'completed'
                },
                {
                    id: 'TXN002',
                    transactionId: 'TXN123457',
                    userName: 'Jane Smith',
                    type: 'Withdrawal',
                    amount: 200.00,
                    fee: 2.00,
                    netAmount: 198.00,
                    createdAt: new Date(Date.now() - 7200000).toISOString(),
                    status: 'pending'
                }
            ];
            
            updateTransactionsTable(transactions);
        }
        
        // Update transactions table
        function updateTransactionsTable(transactions) {
            if ($.fn.DataTable.isDataTable('#transactionsTable')) {
                $('#transactionsTable').DataTable().destroy();
            }
            
            $('#transactionsTable').DataTable({
                data: transactions.map(transaction => [
                    transaction.transactionId,
                    transaction.userName,
                    transaction.type,
                    `$${formatNumber(transaction.amount)}`,
                    `$${formatNumber(transaction.fee || 0)}`,
                    `$${formatNumber(transaction.netAmount || transaction.amount)}`,
                    formatDateTime(transaction.createdAt),
                    `<span class="status-badge ${getStatusClass(transaction.status)}">${transaction.status}</span>`,
                    `
                        <button class="btn btn-outline btn-sm" onclick="viewTransactionDetails('${transaction.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                    `
                ]),
                pageLength: 10,
                order: [[6, 'desc']],
                responsive: true
            });
        }
        
        // Load miners for sale data
        function loadMinersSaleData() {
            // Mock miners data
            const miners = [
                {
                    id: 1,
                    title: 'Bitmain Antminer S19 Pro',
                    model: 'S19 Pro',
                    manufacturer: 'Bitmain',
                    price: 2999.99,
                    stock: 10,
                    hashrate: '110 TH/s',
                    power: 3250,
                    status: 'active',
                    imageUrl: ''
                },
                {
                    id: 2,
                    title: 'MicroBT Whatsminer M50',
                    model: 'M50',
                    manufacturer: 'MicroBT',
                    price: 3500.00,
                    stock: 5,
                    hashrate: '130 TH/s',
                    power: 3420,
                    status: 'active',
                    imageUrl: ''
                }
            ];
            
            updateMinersSaleTable(miners);
            updateMinersSaleGrid(miners);
        }
        
        // Update miners sale table
        function updateMinersSaleTable(miners) {
            if ($.fn.DataTable.isDataTable('#saleMinersTable')) {
                $('#saleMinersTable').DataTable().destroy();
            }
            
            $('#saleMinersTable').DataTable({
                data: miners.map(miner => [
                    miner.id,
                    miner.imageUrl ? 
                        `<img src="${miner.imageUrl}" alt="${miner.title}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">` : 
                        `<div style="width: 50px; height: 50px; background-color: #f1f5f9; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-server" style="color: #94a3b8;"></i>
                        </div>`,
                    miner.model,
                    miner.manufacturer,
                    `$${formatNumber(miner.price)}`,
                    miner.stock,
                    miner.hashrate,
                    `${miner.power}W`,
                    `<span class="status-badge ${miner.status === 'active' ? 'status-active' : 'status-inactive'}">${miner.status}</span>`,
                    `
                        <div class="action-buttons">
                            <button class="btn btn-outline btn-sm" onclick="viewMinerDetails(${miner.id}, 'sale')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="editMiner(${miner.id}, 'sale')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMiner(${miner.id}, 'sale')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `
                ]),
                pageLength: 10,
                order: [[0, 'desc']],
                responsive: true
            });
        }
        
        // Update miners sale grid
        function updateMinersSaleGrid(miners) {
            const grid = document.getElementById('saleMinersGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            miners.forEach(miner => {
                const card = document.createElement('div');
                card.className = 'miner-card';
                card.innerHTML = `
                    <div class="miner-image">
                        ${miner.imageUrl ? 
                            `<img src="${miner.imageUrl}" alt="${miner.title}">` : 
                            `<i class="fas fa-server" style="font-size: 3rem; color: #94a3b8;"></i>`}
                    </div>
                    <div class="miner-content">
                        <h3 class="miner-title">${miner.title}</h3>
                        <div class="miner-specs">
                            <div class="miner-spec">
                                <span class="spec-label">Hashrate</span>
                                <span class="spec-value">${miner.hashrate}</span>
                            </div>
                            <div class="miner-spec">
                                <span class="spec-label">Power</span>
                                <span class="spec-value">${miner.power}W</span>
                            </div>
                            <div class="miner-spec">
                                <span class="spec-label">Price</span>
                                <span class="spec-value">$${formatNumber(miner.price)}</span>
                            </div>
                            <div class="miner-spec">
                                <span class="spec-label">Stock</span>
                                <span class="spec-value">${miner.stock}</span>
                            </div>
                        </div>
                        <div class="miner-actions">
                            <button class="btn btn-outline btn-sm" onclick="viewMinerDetails(${miner.id}, 'sale')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="editMiner(${miner.id}, 'sale')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMiner(${miner.id}, 'sale')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }
        
        // Load miners for rent data
        function loadMinersRentData() {
            // Mock rent miners data
            const miners = [
                {
                    id: 1,
                    title: 'Bitmain Antminer S19 Pro',
                    model: 'S19 Pro',
                    manufacturer: 'Bitmain',
                    dailyPrice: 9.99,
                    available: 50,
                    hashrate: '110 TH/s',
                    power: 3250,
                    status: 'active',
                    imageUrl: ''
                },
                {
                    id: 2,
                    title: 'MicroBT Whatsminer M50',
                    model: 'M50',
                    manufacturer: 'MicroBT',
                    dailyPrice: 11.99,
                    available: 30,
                    hashrate: '130 TH/s',
                    power: 3420,
                    status: 'active',
                    imageUrl: ''
                }
            ];
            
            updateMinersRentTable(miners);
            updateMinersRentGrid(miners);
        }
        
        // Update miners rent table
        function updateMinersRentTable(miners) {
            if ($.fn.DataTable.isDataTable('#rentMinersTable')) {
                $('#rentMinersTable').DataTable().destroy();
            }
            
            $('#rentMinersTable').DataTable({
                data: miners.map(miner => [
                    miner.id,
                    miner.imageUrl ? 
                        `<img src="${miner.imageUrl}" alt="${miner.title}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 6px;">` : 
                        `<div style="width: 50px; height: 50px; background-color: #f1f5f9; border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-server" style="color: #94a3b8;"></i>
                        </div>`,
                    miner.model,
                    miner.manufacturer,
                    `$${formatNumber(miner.dailyPrice)}/day`,
                    miner.available,
                    miner.hashrate,
                    `${miner.power}W`,
                    `<span class="status-badge ${miner.status === 'active' ? 'status-active' : 'status-inactive'}">${miner.status}</span>`,
                    `
                        <div class="action-buttons">
                            <button class="btn btn-outline btn-sm" onclick="viewMinerDetails(${miner.id}, 'rent')">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="editMiner(${miner.id}, 'rent')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMiner(${miner.id}, 'rent')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `
                ]),
                pageLength: 10,
                order: [[0, 'desc']],
                responsive: true
            });
        }
        
        // Update miners rent grid
        function updateMinersRentGrid(miners) {
            const grid = document.getElementById('rentMinersGrid');
            if (!grid) return;
            
            grid.innerHTML = '';
            
            miners.forEach(miner => {
                const card = document.createElement('div');
                card.className = 'miner-card';
                card.innerHTML = `
                    <div class="miner-image">
                        ${miner.imageUrl ? 
                            `<img src="${miner.imageUrl}" alt="${miner.title}">` : 
                            `<i class="fas fa-server" style="font-size: 3rem; color: #94a3b8;"></i>`}
                    </div>
                    <div class="miner-content">
                        <h3 class="miner-title">${miner.title}</h3>
                        <div class="miner-specs">
                            <div class="miner-spec">
                                <span class="spec-label">Hashrate</span>
                                <span class="spec-value">${miner.hashrate}</span>
                            </div>
                            <div class="miner-spec">
                                <span class="spec-label">Power</span>
                                <span class="spec-value">${miner.power}W</span>
                            </div>
                            <div class="miner-spec">
                                <span class="spec-label">Daily Price</span>
                                <span class="spec-value">$${formatNumber(miner.dailyPrice)}</span>
                            </div>
                            <div class="miner-spec">
                                <span class="spec-label">Available</span>
                                <span class="spec-value">${miner.available}</span>
                            </div>
                        </div>
                        <div class="miner-actions">
                            <button class="btn btn-outline btn-sm" onclick="viewMinerDetails(${miner.id}, 'rent')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="editMiner(${miner.id}, 'rent')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteMiner(${miner.id}, 'rent')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }
        
        // Load loans data
        function loadLoansData() {
            // Mock loans data
            const loans = [
                {
                    id: 'LOAN001',
                    loanId: 'LN123456',
                    userName: 'John Doe',
                    amount: 5000.00,
                    interestRate: 12,
                    term: 180,
                    collateralValue: 7500.00,
                    createdAt: new Date(Date.now() - 86400000).toISOString(),
                    status: 'pending'
                },
                {
                    id: 'LOAN002',
                    loanId: 'LN123457',
                    userName: 'Jane Smith',
                    amount: 10000.00,
                    interestRate: 10,
                    term: 360,
                    collateralValue: 15000.00,
                    createdAt: new Date(Date.now() - 172800000).toISOString(),
                    status: 'approved'
                }
            ];
            
            updateLoansTable(loans);
        }
        
        // Update loans table
        function updateLoansTable(loans) {
            if ($.fn.DataTable.isDataTable('#loansTable')) {
                $('#loansTable').DataTable().destroy();
            }
            
            $('#loansTable').DataTable({
                data: loans.map(loan => [
                    loan.loanId,
                    loan.userName,
                    `$${formatNumber(loan.amount)}`,
                    `${loan.interestRate}%`,
                    `${loan.term} days`,
                    `$${formatNumber(loan.collateralValue || 0)}`,
                    formatDateTime(loan.createdAt),
                    `<span class="status-badge ${getStatusClass(loan.status)}">${loan.status}</span>`,
                    loan.status === 'pending' ? `
                        <div class="action-buttons">
                            <button class="btn btn-success btn-sm" onclick="approveLoan('${loan.id}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="rejectLoan('${loan.id}')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="viewLoanDetails('${loan.id}')">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    ` : `
                        <button class="btn btn-outline btn-sm" onclick="viewLoanDetails('${loan.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                    `
                ]),
                pageLength: 10,
                order: [[6, 'desc']],
                responsive: true
            });
        }
        
        // Load stored cards data
        function loadStoredCardsData() {
            // Mock cards data
            const cards = [
                {
                    id: 1,
                    userName: 'John Doe',
                    userEmail: 'john@example.com',
                    cardType: 'Visa',
                    cardNumber: '**** **** **** 1234',
                    expiryMonth: '12',
                    expiryYear: '2025',
                    cvv: '***',
                    cardholderName: 'John Doe',
                    storedAt: new Date(Date.now() - 86400000 * 30).toISOString()
                },
                {
                    id: 2,
                    userName: 'Jane Smith',
                    userEmail: 'jane@example.com',
                    cardType: 'Mastercard',
                    cardNumber: '**** **** **** 5678',
                    expiryMonth: '06',
                    expiryYear: '2024',
                    cvv: '***',
                    cardholderName: 'Jane Smith',
                    storedAt: new Date(Date.now() - 86400000 * 15).toISOString()
                }
            ];
            
            updateCardsTable(cards);
        }
        
        // Update cards table
        function updateCardsTable(cards) {
            if ($.fn.DataTable.isDataTable('#cardsTable')) {
                $('#cardsTable').DataTable().destroy();
            }
            
            $('#cardsTable').DataTable({
                data: cards.map(card => [
                    `
                        <div>${card.userName}</div>
                        <small>${card.userEmail}</small>
                    `,
                    card.cardType,
                    `<strong>${card.cardNumber}</strong>`,
                    `${card.expiryMonth}/${card.expiryYear}`,
                    card.cvv,
                    card.cardholderName,
                    formatDate(card.storedAt),
                    `
                        <button class="btn btn-danger btn-sm" onclick="deleteCard(${card.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    `
                ]),
                pageLength: 10,
                order: [[6, 'desc']],
                responsive: true
            });
        }
        
        // Load notifications history
        function loadNotificationsHistory() {
            // Mock notifications data
            const notifications = [
                {
                    id: 1,
                    title: 'System Maintenance',
                    type: 'all',
                    recipientCount: 1542,
                    sentAt: new Date(Date.now() - 86400000).toISOString(),
                    status: 'sent'
                },
                {
                    id: 2,
                    title: 'KYC Verification Required',
                    type: 'kyc',
                    recipientCount: 23,
                    sentAt: new Date(Date.now() - 172800000).toISOString(),
                    status: 'sent'
                }
            ];
            
            updateNotificationsTable(notifications);
        }
        
        // Update notifications table
        function updateNotificationsTable(notifications) {
            const table = $('#notificationsTable');
            
            if ($.fn.DataTable.isDataTable('#notificationsTable')) {
                table.DataTable().destroy();
            }
            
            if (notifications.length > 0) {
                table.DataTable({
                    data: notifications.map(notification => [
                        notification.id,
                        notification.title,
                        notification.type,
                        notification.recipientCount,
                        formatDateTime(notification.sentAt),
                        `<span class="status-badge ${notification.status === 'sent' ? 'status-completed' : 'status-pending'}">${notification.status}</span>`,
                        `
                            <button class="btn btn-outline btn-sm" onclick="viewNotificationDetails(${notification.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                        `
                    ]),
                    pageLength: 10,
                    order: [[4, 'desc']],
                    responsive: true
                });
            }
        }
        
        // Switch miner form type (sale/rent)
        function switchMinerFormType(type) {
            document.querySelectorAll('#add-miner .tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-type') === type) {
                    tab.classList.add('active');
                }
            });
            
            document.querySelectorAll('#add-miner .tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === `${type}Form`) {
                    content.classList.add('active');
                }
            });
        }
        
        // Switch notification tab
        function switchNotificationTab(type) {
            document.querySelectorAll('#notifications .tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-notification-type') === type) {
                    tab.classList.add('active');
                }
            });
            
            document.querySelectorAll('#notifications .tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === `${type}Notification`) {
                    content.classList.add('active');
                }
            });
        }
        
        // Switch settings tab
        function switchSettingsTab(type) {
            document.querySelectorAll('#settings .tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-settings') === type) {
                    tab.classList.add('active');
                }
            });
            
            document.querySelectorAll('#settings .tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === `${type}Settings`) {
                    content.classList.add('active');
                }
            });
        }
        
        // Toggle table/grid view
        function toggleTableView(container, view) {
            const tableView = container.querySelector('.table-view');
            const gridView = container.querySelector('.grid-view');
            
            if (view === 'table') {
                tableView.style.display = 'block';
                gridView.style.display = 'none';
            } else {
                tableView.style.display = 'none';
                gridView.style.display = 'block';
            }
        }
        
        // Filter table by status
        function filterTableByStatus(tableId, status) {
            const table = $(`#${tableId}`).DataTable();
            if (status === 'all') {
                table.search('').draw();
            } else {
                table.search(status).draw();
            }
        }
        
        // Get table ID from parent element
        function getTableIdFromParent(element) {
            const card = element.closest('.data-table-card');
            if (!card) return null;
            
            const table = card.querySelector('table');
            return table ? table.id : null;
        }
        
        // Initialize DataTables
        function initDataTables() {
            // Initialize all tables with DataTables
            $('.display').each(function() {
                if (!$.fn.DataTable.isDataTable(this)) {
                    $(this).DataTable({
                        responsive: true,
                        pageLength: 10,
                        dom: '<"top"<"dataTables-header"lf>><"dataTables-body"rt><"bottom"<"dataTables-footer"ip>>',
                        language: {
                            search: "Search:",
                            lengthMenu: "Show _MENU_ entries",
                            info: "Showing _START_ to _END_ of _TOTAL_ entries",
                            paginate: {
                                first: "First",
                                last: "Last",
                                next: "Next",
                                previous: "Previous"
                            }
                        }
                    });
                }
            });
        }
        
        // Setup form calculations
        function setupFormCalculations() {
            // Rent form calculations
            const rentDailyIncome = document.getElementById('rentDailyIncome');
            const rentDailyElectricity = document.getElementById('rentDailyElectricity');
            const rentDailyNet = document.getElementById('rentDailyNet');
            
            if (rentDailyIncome && rentDailyElectricity && rentDailyNet) {
                const calculateNet = () => {
                    const income = parseFloat(rentDailyIncome.value) || 0;
                    const electricity = parseFloat(rentDailyElectricity.value) || 0;
                    rentDailyNet.value = (income - electricity).toFixed(2);
                };
                
                rentDailyIncome.addEventListener('input', calculateNet);
                rentDailyElectricity.addEventListener('input', calculateNet);
            }
            
            // Sale form calculations
            const salePrice = document.getElementById('salePrice');
            const saleDiscount = document.getElementById('saleDiscount');
            const saleDailyProfit = document.getElementById('saleDailyProfit');
            const saleROI = document.getElementById('saleROI');
            
            if (salePrice && saleDiscount && saleDailyProfit && saleROI) {
                const calculateROI = () => {
                    const price = parseFloat(salePrice.value) || 0;
                    const discount = parseFloat(saleDiscount.value) || 0;
                    const dailyProfit = parseFloat(saleDailyProfit.value) || 0;
                    
                    if (dailyProfit > 0) {
                        const finalPrice = price * (1 - discount / 100);
                        saleROI.value = Math.ceil(finalPrice / dailyProfit);
                    }
                };
                
                salePrice.addEventListener('input', calculateROI);
                saleDiscount.addEventListener('input', calculateROI);
                saleDailyProfit.addEventListener('input', calculateROI);
            }
        }
        
        // Setup real-time updates
        function setupRealTimeUpdates() {
            // Update dashboard every 30 seconds
            setInterval(() => {
                if (document.querySelector('#dashboard').classList.contains('active')) {
                    loadDashboardData();
                }
            }, 30000);
            
            // Update badges every minute
            setInterval(updateAllBadges, 60000);
        }
        
        // Update all notification badges
        function updateAllBadges() {
            // Mock badge updates
            const badges = {
                pendingKYC: Math.floor(Math.random() * 10) + 1,
                pendingDeposits: Math.floor(Math.random() * 5) + 1,
                pendingWithdrawals: Math.floor(Math.random() * 3) + 1,
                pendingLoans: Math.floor(Math.random() * 2) + 1
            };
            
            document.getElementById('kycBadge').textContent = badges.pendingKYC;
            document.getElementById('depositsBadge').textContent = badges.pendingDeposits;
            document.getElementById('withdrawalsBadge').textContent = badges.pendingWithdrawals;
            document.getElementById('loansBadge').textContent = badges.pendingLoans;
        }
        
        // Handle add miner for sale
        function handleAddMinerSale(e) {
            e.preventDefault();
            
            // Validate form
            const requiredFields = ['saleTitle', 'saleManufacturer', 'saleModel', 'salePrice', 'saleStock', 'salePower', 'saleAlgorithm', 'saleHashrate', 'saleEfficiency', 'saleCountry', 'saleDescription'];
            let isValid = true;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = '#ef4444';
                } else {
                    field.style.borderColor = '#e2e8f0';
                }
            });
            
            if (!isValid) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }
            
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('Miner added successfully!', 'success');
                resetMinerForm('sale');
                
                // Switch to miners sale tab
                switchTab('miners-sale');
                loadMinersSaleData();
            }, 2000);
        }
        
        // Handle add miner for rent
        function handleAddMinerRent(e) {
            e.preventDefault();
            
            // Validate form
            const requiredFields = ['rentTitle', 'rentManufacturer', 'rentModel', 'rentDailyPrice', 'rentAvailable', 'rentMinRentDays', 'rentPower', 'rentHashrate', 'rentAlgorithm', 'rentDailyIncome', 'rentDailyElectricity', 'rentCountry', 'rentDescription'];
            let isValid = true;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = '#ef4444';
                } else {
                    field.style.borderColor = '#e2e8f0';
                }
            });
            
            if (!isValid) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }
            
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('Miner added for rent successfully!', 'success');
                resetMinerForm('rent');
                
                // Switch to miners rent tab
                switchTab('miners-rent');
                loadMinersRentData();
            }, 2000);
        }
        
        // Handle send notification
        function handleSendNotification(e) {
            e.preventDefault();
            
            const title = document.getElementById('notificationTitle').value;
            const message = document.getElementById('notificationMessage').value;
            
            if (!title || !message) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }
            
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('Notification sent successfully!', 'success');
                document.getElementById('sendNotificationForm').reset();
                document.getElementById('specificUserGroup').style.display = 'none';
                
                // Refresh notifications history
                loadNotificationsHistory();
            }, 1500);
        }
        
        // Handle save general settings
        function handleSaveGeneralSettings(e) {
            e.preventDefault();
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('General settings saved successfully!', 'success');
            }, 1000);
        }
        
        // Handle save fees settings
        function handleSaveFeesSettings(e) {
            e.preventDefault();
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('Fees settings saved successfully!', 'success');
            }, 1000);
        }
        
        // Handle save security settings
        function handleSaveSecuritySettings(e) {
            e.preventDefault();
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('Security settings saved successfully!', 'success');
            }, 1000);
        }
        
        // Handle save API settings
        function handleSaveApiSettings(e) {
            e.preventDefault();
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('API settings saved successfully!', 'success');
            }, 1000);
        }
        
        // Reset miner form
        function resetMinerForm(type) {
            const formId = type === 'sale' ? 'addMinerSaleForm' : 'addMinerRentForm';
            document.getElementById(formId).reset();
            
            const previewId = type === 'sale' ? 'saleImagePreview' : 'rentImagePreview';
            document.getElementById(previewId).innerHTML = '';
            
            // Reset border colors
            const form = document.getElementById(formId);
            const inputs = form.querySelectorAll('input, select, textarea');
            inputs.forEach(input => {
                input.style.borderColor = '#e2e8f0';
            });
        }
        
        // Preview image before upload
        function previewImage(input, previewId) {
            const preview = document.getElementById(previewId);
            preview.innerHTML = '';
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.maxWidth = '200px';
                    img.style.maxHeight = '200px';
                    img.style.borderRadius = '8px';
                    img.style.marginTop = '10px';
                    preview.appendChild(img);
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // Show logout modal
        function showLogoutModal() {
            const modalHtml = `
                <div class="modal-overlay active" id="logoutModal">
                    <div class="modal" style="max-width: 400px;">
                        <div class="modal-header">
                            <h3>Logout Confirmation</h3>
                            <button class="modal-close" onclick="closeModal('logoutModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div style="text-align: center; padding: 20px 0;">
                                <i class="fas fa-sign-out-alt" style="font-size: 3rem; color: #64748b; margin-bottom: 15px;"></i>
                                <h4 style="margin-bottom: 10px; color: #1e293b;">Confirm Logout</h4>
                                <p style="color: #64748b;">Are you sure you want to logout from the admin panel?</p>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('logoutModal')">Cancel</button>
                            <button class="btn btn-danger" onclick="performLogout()">Logout</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Perform logout
        function performLogout() {
            showLoading();
            
            // Simulate logout
            setTimeout(() => {
                hideLoading();
                localStorage.removeItem('hashvex_admin_token');
                currentAdmin = null;
                authToken = null;
                isAuthenticated = false;
                
                // Show login modal
                showLoginModal();
                
                // Reset admin container
                document.getElementById('adminContainer').style.display = 'none';
                
                showNotification('Logged out successfully', 'success');
            }, 1000);
        }
        
        // Show add user modal
        function showAddUserModal() {
            const modalHtml = `
                <div class="modal-overlay active" id="addUserModal">
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>Add New User</h3>
                            <button class="modal-close" onclick="closeModal('addUserModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="addUserForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newUserName">Full Name *</label>
                                        <input type="text" id="newUserName" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="newUserEmail">Email *</label>
                                        <input type="email" id="newUserEmail" class="form-control" required>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newUserPassword">Password *</label>
                                        <input type="password" id="newUserPassword" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="newUserConfirmPassword">Confirm Password *</label>
                                        <input type="password" id="newUserConfirmPassword" class="form-control" required>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newUserMainBalance">Initial Main Balance (USD)</label>
                                        <input type="number" id="newUserMainBalance" class="form-control" value="0" min="0" step="0.01">
                                    </div>
                                    <div class="form-group">
                                        <label for="newUserIncomeBalance">Initial Income Balance (USD)</label>
                                        <input type="number" id="newUserIncomeBalance" class="form-control" value="0" min="0" step="0.01">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="newUserRole">User Role</label>
                                        <select id="newUserRole" class="form-control">
                                            <option value="user">Regular User</option>
                                            <option value="vip">VIP User</option>
                                            <option value="affiliate">Affiliate</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="newUserStatus">
                                            <input type="checkbox" id="newUserStatus" checked> Active Account
                                        </label>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('addUserModal')">Cancel</button>
                            <button class="btn btn-primary" onclick="addNewUser()">Add User</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Add new user
        function addNewUser() {
            const name = document.getElementById('newUserName').value;
            const email = document.getElementById('newUserEmail').value;
            const password = document.getElementById('newUserPassword').value;
            const confirmPassword = document.getElementById('newUserConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }
            
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('User added successfully!', 'success');
                closeModal('addUserModal');
                loadUsersData();
            }, 1500);
        }
        
        // Show edit balance modal
        function showEditBalanceModal(userId = null, userName = null) {
            let title = 'Edit User Balance';
            let userSelect = '';
            let balanceFields = '';
            
            if (userId && userName) {
                title = `Edit Balance: ${userName}`;
                userSelect = `<input type="hidden" id="editBalanceUserId" value="${userId}">`;
                balanceFields = `
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editMainBalance">Main Balance (USD) *</label>
                            <input type="number" id="editMainBalance" class="form-control" value="0" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="editIncomeBalance">Income Balance (USD) *</label>
                            <input type="number" id="editIncomeBalance" class="form-control" value="0" min="0" step="0.01" required>
                        </div>
                    </div>
                `;
            } else {
                userSelect = `
                    <div class="form-group">
                        <label for="editBalanceUserSelect">Select User *</label>
                        <select id="editBalanceUserSelect" class="form-control" required>
                            <option value="">Select User</option>
                            <option value="1">John Doe (john@example.com)</option>
                            <option value="2">Jane Smith (jane@example.com)</option>
                            <option value="3">Bob Wilson (bob@example.com)</option>
                        </select>
                    </div>
                `;
                balanceFields = `
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editMainBalance">Main Balance (USD) *</label>
                            <input type="number" id="editMainBalance" class="form-control" value="0" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="editIncomeBalance">Income Balance (USD) *</label>
                            <input type="number" id="editIncomeBalance" class="form-control" value="0" min="0" step="0.01" required>
                        </div>
                    </div>
                `;
            }
            
            const modalHtml = `
                <div class="modal-overlay active" id="editBalanceModal">
                    <div class="modal" style="max-width: 500px;">
                        <div class="modal-header">
                            <h3>${title}</h3>
                            <button class="modal-close" onclick="closeModal('editBalanceModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="editBalanceForm">
                                ${userSelect}
                                ${balanceFields}
                                <div class="form-group">
                                    <label for="editBalanceReason">Reason for Change</label>
                                    <textarea id="editBalanceReason" class="form-control" rows="3" placeholder="Explain why you are changing the balance..."></textarea>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('editBalanceModal')">Cancel</button>
                            <button class="btn btn-primary" onclick="saveUserBalance()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Save user balance
        function saveUserBalance() {
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('Balance updated successfully!', 'success');
                closeModal('editBalanceModal');
                loadBalancesData();
            }, 1500);
        }
        
        // Show add miner modal
        function showAddMinerModal(type) {
            switchTab('add-miner');
            setTimeout(() => {
                switchMinerFormType(type);
            }, 100);
        }
        
        // Edit user
        function editUser(userId) {
            const modalHtml = `
                <div class="modal-overlay active" id="editUserModal">
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>Edit User</h3>
                            <button class="modal-close" onclick="closeModal('editUserModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="editUserForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="editUserName">Full Name</label>
                                        <input type="text" id="editUserName" class="form-control" value="John Doe">
                                    </div>
                                    <div class="form-group">
                                        <label for="editUserEmail">Email</label>
                                        <input type="email" id="editUserEmail" class="form-control" value="john@example.com" disabled>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="editUserPhone">Phone</label>
                                        <input type="text" id="editUserPhone" class="form-control" value="+1234567890">
                                    </div>
                                    <div class="form-group">
                                        <label for="editUserCountry">Country</label>
                                        <input type="text" id="editUserCountry" class="form-control" value="United States">
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="editUserRole">Role</label>
                                        <select id="editUserRole" class="form-control">
                                            <option value="user" selected>Regular User</option>
                                            <option value="vip">VIP User</option>
                                            <option value="affiliate">Affiliate</option>
                                            <option value="admin">Admin</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="editUserStatus">
                                            <input type="checkbox" id="editUserStatus" checked> Active Account
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="editUserKYC">KYC Status</label>
                                        <select id="editUserKYC" class="form-control">
                                            <option value="not_started">Not Started</option>
                                            <option value="pending">Pending</option>
                                            <option value="approved" selected>Approved</option>
                                            <option value="rejected">Rejected</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="editUser2FA">
                                            <input type="checkbox" id="editUser2FA"> 2FA Enabled
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="editUserNotes">Admin Notes</label>
                                    <textarea id="editUserNotes" class="form-control" rows="3">VIP customer with high activity</textarea>
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('editUserModal')">Cancel</button>
                            <button class="btn btn-primary" onclick="saveUserChanges()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Save user changes
        function saveUserChanges() {
            showLoading();
            
            // Simulate API call
            setTimeout(() => {
                hideLoading();
                showNotification('User updated successfully!', 'success');
                closeModal('editUserModal');
                loadUsersData();
            }, 1500);
        }
        
        // Toggle user status
        function toggleUserStatus(userId, currentStatus) {
            const newStatus = !currentStatus;
            const action = newStatus ? 'activate' : 'deactivate';
            
            if (confirm(`Are you sure you want to ${action} this user?`)) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification(`User ${action}d successfully!`, 'success');
                    loadUsersData();
                }, 1500);
            }
        }
        
        // View user details
        function viewUserDetails(userId) {
            const modalHtml = `
                <div class="modal-overlay active" id="userDetailsModal">
                    <div class="modal" style="max-width: 700px;">
                        <div class="modal-header">
                            <h3>User Details</h3>
                            <button class="modal-close" onclick="closeModal('userDetailsModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Name</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">John Doe</div>
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">john@example.com</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Joined</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">${formatDate(new Date().toISOString())}</div>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge status-active">Active</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>KYC Status</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge status-approved">Approved</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Balance</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">$1,250.50</div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('userDetailsModal')">Close</button>
                            <button class="btn btn-primary" onclick="editUser(${userId})">
                                <i class="fas fa-edit"></i> Edit User
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Preview notification
        function previewNotification() {
            const title = document.getElementById('notificationTitle').value || 'Notification Title';
            const message = document.getElementById('notificationMessage').value || 'Notification message content...';
            const priority = document.getElementById('notificationPriority').value;
            
            const modalHtml = `
                <div class="modal-overlay active" id="previewModal">
                    <div class="modal" style="max-width: 500px;">
                        <div class="modal-header">
                            <h3>Notification Preview</h3>
                            <button class="modal-close" onclick="closeModal('previewModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div style="background-color: #f8fafc; padding: 20px; border-radius: 8px; border-left: 4px solid ${getPriorityColor(priority)};">
                                <h4 style="margin-bottom: 10px; color: #1e293b;">${title}</h4>
                                <p style="color: #475569; line-height: 1.6;">${message}</p>
                                <div style="margin-top: 15px; font-size: 0.85rem; color: #64748b;">
                                    <span class="status-badge" style="background-color: ${getPriorityColor(priority)}20; color: ${getPriorityColor(priority)};">${priority.toUpperCase()}</span>
                                    <span style="margin-left: 10px;">Just now</span>
                                </div>
                            </div>
                            <p style="margin-top: 20px; color: #64748b; font-size: 0.9rem;">
                                This is how the notification will appear to users.
                            </p>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('previewModal')">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Get priority color
        function getPriorityColor(priority) {
            switch(priority) {
                case 'low': return '#10b981';
                case 'normal': return '#3b82f6';
                case 'high': return '#f59e0b';
                case 'urgent': return '#ef4444';
                default: return '#3b82f6';
            }
        }
        
        // Approve KYC
        function approveKYC(userId) {
            if (confirm('Approve this KYC submission?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('KYC approved successfully!', 'success');
                    loadKYCData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // Reject KYC
        function rejectKYC(userId) {
            if (confirm('Reject this KYC submission?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('KYC rejected successfully!', 'success');
                    loadKYCData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // View KYC documents
        function viewKYCDocuments(userId) {
            const modalHtml = `
                <div class="modal-overlay active" id="kycDocsModal">
                    <div class="modal" style="max-width: 800px;">
                        <div class="modal-header">
                            <h3>KYC Documents</h3>
                            <button class="modal-close" onclick="closeModal('kycDocsModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="kyc-docs">
                                <div class="kyc-doc">
                                    <h4>Passport</h4>
                                    <div style="height: 200px; background-color: #f1f5f9; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
                                        <i class="fas fa-passport" style="font-size: 3rem; color: #94a3b8;"></i>
                                    </div>
                                    <p><strong>Status:</strong> <span class="status-badge status-pending">Pending</span></p>
                                </div>
                                <div class="kyc-doc">
                                    <h4>Proof of Address</h4>
                                    <div style="height: 200px; background-color: #f1f5f9; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
                                        <i class="fas fa-file-invoice" style="font-size: 3rem; color: #94a3b8;"></i>
                                    </div>
                                    <p><strong>Status:</strong> <span class="status-badge status-pending">Pending</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('kycDocsModal')">Close</button>
                            <button class="btn btn-success" onclick="approveKYC(${userId})">
                                <i class="fas fa-check"></i> Approve KYC
                            </button>
                            <button class="btn btn-danger" onclick="rejectKYC(${userId})">
                                <i class="fas fa-times"></i> Reject KYC
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Edit user balance from table
        function editUserBalance(userId, userName) {
            showEditBalanceModal(userId, userName);
        }
        
        // Approve deposit
        function approveDeposit(depositId) {
            if (confirm('Approve this deposit?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Deposit approved successfully!', 'success');
                    loadDepositsData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // Reject deposit
        function rejectDeposit(depositId) {
            if (confirm('Reject this deposit?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Deposit rejected successfully!', 'success');
                    loadDepositsData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // Approve withdrawal
        function approveWithdrawal(withdrawalId) {
            if (confirm('Approve this withdrawal?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Withdrawal approved successfully!', 'success');
                    loadWithdrawalsData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // Reject withdrawal
        function rejectWithdrawal(withdrawalId) {
            if (confirm('Reject this withdrawal?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Withdrawal rejected successfully!', 'success');
                    loadWithdrawalsData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // View withdrawal details
        function viewWithdrawalDetails(withdrawalId) {
            const modalHtml = `
                <div class="modal-overlay active" id="withdrawalDetailsModal">
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>Withdrawal Details</h3>
                            <button class="modal-close" onclick="closeModal('withdrawalDetailsModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Transaction ID</label>
                                <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px; font-family: monospace;">TXN123458</div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>User</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">John Doe</div>
                                </div>
                                <div class="form-group">
                                    <label>Amount</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">$200.00</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Method</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">Bitcoin</div>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge status-pending">Pending</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Bitcoin Wallet Address</label>
                                <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px; font-family: monospace; word-break: break-all;">1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa</div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('withdrawalDetailsModal')">Close</button>
                            <button class="btn btn-success" onclick="approveWithdrawal('${withdrawalId}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger" onclick="rejectWithdrawal('${withdrawalId}')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // View transaction details
        function viewTransactionDetails(transactionId) {
            showNotification('Transaction details view would be implemented here', 'info');
        }
        
        // View miner details
        function viewMinerDetails(minerId, type) {
            const isRent = type === 'rent';
            const title = isRent ? 'Bitmain Antminer S19 Pro (Rent)' : 'Bitmain Antminer S19 Pro';
            
            const modalHtml = `
                <div class="modal-overlay active" id="minerDetailsModal">
                    <div class="modal" style="max-width: 800px;">
                        <div class="modal-header">
                            <h3>${title}</h3>
                            <button class="modal-close" onclick="closeModal('minerDetailsModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Manufacturer</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">Bitmain</div>
                                </div>
                                <div class="form-group">
                                    <label>Model</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">S19 Pro</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>${isRent ? 'Daily Price' : 'Price'}</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">$${isRent ? '9.99/day' : '2,999.99'}</div>
                                </div>
                                <div class="form-group">
                                    <label>${isRent ? 'Available' : 'Stock'}</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">${isRent ? '50' : '10'}</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Power</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">3250W</div>
                                </div>
                                <div class="form-group">
                                    <label>Hashrate</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">110 TH/s</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Algorithm</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">SHA-256</div>
                                </div>
                                <div class="form-group">
                                    <label>Efficiency</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">29.5 J/TH</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Country</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">United States</div>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge status-active">Active</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('minerDetailsModal')">Close</button>
                            <button class="btn btn-primary" onclick="editMiner(${minerId}, '${type}')">
                                <i class="fas fa-edit"></i> Edit Miner
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Edit miner
        function editMiner(minerId, type) {
            showNotification('Edit miner functionality would be implemented here', 'info');
        }
        
        // Delete miner
        function deleteMiner(minerId, type) {
            if (confirm(`Are you sure you want to delete this miner? This action cannot be undone.`)) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Miner deleted successfully!', 'success');
                    if (type === 'sale') {
                        loadMinersSaleData();
                    } else {
                        loadMinersRentData();
                    }
                }, 1500);
            }
        }
        
        // Approve loan
        function approveLoan(loanId) {
            if (confirm('Approve this loan request?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Loan approved successfully!', 'success');
                    loadLoansData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // Reject loan
        function rejectLoan(loanId) {
            if (confirm('Reject this loan request?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Loan rejected successfully!', 'success');
                    loadLoansData();
                    updateAllBadges();
                }, 1500);
            }
        }
        
        // View loan details
        function viewLoanDetails(loanId) {
            const modalHtml = `
                <div class="modal-overlay active" id="loanDetailsModal">
                    <div class="modal" style="max-width: 700px;">
                        <div class="modal-header">
                            <h3>Loan Details</h3>
                            <button class="modal-close" onclick="closeModal('loanDetailsModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Loan ID</label>
                                <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px; font-family: monospace;">LN123456</div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>User</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">John Doe</div>
                                </div>
                                <div class="form-group">
                                    <label>Amount</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">$5,000.00</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Interest Rate</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">12%</div>
                                </div>
                                <div class="form-group">
                                    <label>Term</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">180 days</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Collateral Value</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">$7,500.00</div>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge status-pending">Pending</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('loanDetailsModal')">Close</button>
                            <button class="btn btn-success" onclick="approveLoan('${loanId}')">
                                <i class="fas fa-check"></i> Approve
                            </button>
                            <button class="btn btn-danger" onclick="rejectLoan('${loanId}')">
                                <i class="fas fa-times"></i> Reject
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Delete card
        function deleteCard(cardId) {
            if (confirm('Are you sure you want to delete this stored card?')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('Card deleted successfully!', 'success');
                    loadStoredCardsData();
                }, 1500);
            }
        }
        
        // Delete all cards
        function deleteAllCards() {
            if (confirm('Are you sure you want to delete ALL stored cards? This action cannot be undone.')) {
                showLoading();
                
                // Simulate API call
                setTimeout(() => {
                    hideLoading();
                    showNotification('All cards deleted successfully!', 'success');
                    loadStoredCardsData();
                }, 1500);
            }
        }
        
        // Refresh cards
        function refreshCards() {
            loadStoredCardsData();
            showNotification('Cards refreshed', 'info');
        }
        
        // View notification details
        function viewNotificationDetails(notificationId) {
            const modalHtml = `
                <div class="modal-overlay active" id="notificationDetailsModal">
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <h3>Notification Details</h3>
                            <button class="modal-close" onclick="closeModal('notificationDetailsModal')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Title</label>
                                <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">System Maintenance</div>
                            </div>
                            
                            <div class="form-group">
                                <label>Message</label>
                                <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px; white-space: pre-wrap;">Our system will undergo scheduled maintenance on Saturday, 10:00 PM to 2:00 AM UTC. Services may be temporarily unavailable during this period.</div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Type</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">All Users</div>
                                </div>
                                <div class="form-group">
                                    <label>Priority</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge" style="background-color: #3b82f620; color: #3b82f6;">NORMAL</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Recipients</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">1,542</div>
                                </div>
                                <div class="form-group">
                                    <label>Status</label>
                                    <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">
                                        <span class="status-badge status-completed">Sent</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Sent</label>
                                <div style="padding: 10px; background-color: #f8fafc; border-radius: 6px;">${formatDateTime(new Date(Date.now() - 86400000).toISOString())}</div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeModal('notificationDetailsModal')">Close</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('modalsContainer').innerHTML = modalHtml;
        }
        
        // Export users
        function exportUsers(format) {
            showLoading();
            
            // Simulate export
            setTimeout(() => {
                hideLoading();
                showNotification(`Users exported successfully as ${format.toUpperCase()}`, 'success');
                
                // Create a temporary link to simulate download
                const data = 'User ID,Name,Email,Joined,Status,KYC,Balance\n1,John Doe,john@example.com,2023-10-15,Active,Approved,1250.50\n2,Jane Smith,jane@example.com,2023-11-20,Active,Pending,500.00';
                const blob = new Blob([data], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `users_export_${new Date().toISOString().split('T')[0]}.${format}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            }, 2000);
        }
        
        // Export transactions
        function exportTransactions() {
            showLoading();
            
            // Simulate export
            setTimeout(() => {
                hideLoading();
                showNotification('Transactions exported successfully', 'success');
            }, 2000);
        }
        
        // Filter transactions by date
        function filterTransactions() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (startDate && endDate) {
                showLoading();
                
                // Simulate filtering
                setTimeout(() => {
                    hideLoading();
                    showNotification(`Transactions filtered from ${startDate} to ${endDate}`, 'info');
                }, 1000);
            } else {
                showNotification('Please select both start and end dates', 'warning');
            }
        }
        
        // Perform global search
        function performGlobalSearch(query) {
            if (query.length < 2) return;
            
            // In a real implementation, this would search across all data
            console.log('Searching for:', query);
        }
        
        // Test APIs
        function testApis() {
            showLoading();
            
            // Simulate API testing
            setTimeout(() => {
                hideLoading();
                showNotification('All APIs are working correctly!', 'success');
            }, 2000);
        }
        
        // Toggle password visibility
        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                button.innerHTML = '<i class="fas fa-eye-slash"></i> Hide';
            } else {
                input.type = 'password';
                button.innerHTML = '<i class="fas fa-eye"></i> Show';
            }
        }
        
        // Close modal
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    if (modal.parentElement) {
                        modal.remove();
                    }
                }, 300);
            }
        }
        
        // Show loading
        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }
        
        // Hide loading
        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }
        
        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            const icon = type === 'success' ? 'fa-check' : 
                        type === 'error' ? 'fa-times' : 
                        type === 'warning' ? 'fa-exclamation' : 'fa-info';
            
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${icon}"></i>
                </div>
                <div>
                    <div style="font-weight: 500;">${message}</div>
                    <div style="font-size: 0.85rem; color: #64748b;">Just now</div>
                </div>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: #64748b; cursor: pointer; margin-left: auto;">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            document.getElementById('notificationContainer').appendChild(notification);
            
            // Show with animation
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentElement) {
                            notification.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }
        
        // Utility function to format numbers
        function formatNumber(num) {
            if (num === undefined || num === null) return '0';
            return new Intl.NumberFormat('en-US', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(num);
        }
        
        // Utility function to format date
        function formatDate(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        }
        
        // Utility function to format date and time
        function formatDateTime(dateString) {
            if (!dateString) return 'N/A';
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        // Get status class for badges
        function getStatusClass(status) {
            switch(status.toLowerCase()) {
                case 'approved':
                case 'completed':
                case 'active':
                case 'sent':
                    return 'status-approved';
                case 'pending':
                    return 'status-pending';
                case 'rejected':
                case 'failed':
                case 'inactive':
                    return 'status-rejected';
                default:
                    return 'status-inactive';
            }
        }
        
        // Handle responsive design
        function handleResponsive() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            
            if (window.innerWidth <= 992) {
                if (mobileMenuToggle) mobileMenuToggle.style.display = 'block';
                if (sidebar) sidebar.classList.remove('active');
            } else {
                if (mobileMenuToggle) mobileMenuToggle.style.display = 'none';
                if (sidebar) sidebar.classList.add('active');
            }
        }
        
        // Initialize responsive handling
        window.addEventListener('resize', handleResponsive);
        handleResponsive();
    </script>
</body>
</html>
